<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OBS Framework: DC_PUSMemoryLoadOffset class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>DC_PUSMemoryLoadOffset Class Reference</h1><code>#include &lt;<a class="el" href="DC__PUSMemoryLoadOffset_8h-source.html">DC_PUSMemoryLoadOffset.h</a>&gt;</code>
<p>
<p>Inheritance diagram for DC_PUSMemoryLoadOffset:
<p><center><img src="classDC__PUSMemoryLoadOffset.png" usemap="#DC_PUSMemoryLoadOffset_map" border="0" alt=""></center>
<map name="DC_PUSMemoryLoadOffset_map">
<area href="classPUSMemoryLoad.html" alt="PUSMemoryLoad" shape="rect" coords="0,224,169,248">
<area href="classPUSTelecommand.html" alt="PUSTelecommand" shape="rect" coords="0,168,169,192">
<area href="classTelecommand.html" alt="Telecommand" shape="rect" coords="0,112,169,136">
<area href="classPunctualAction.html" alt="PunctualAction" shape="rect" coords="0,56,169,80">
<area href="classCC__RootObject.html" alt="CC_RootObject" shape="rect" coords="0,0,169,24">
</map>
<a href="classDC__PUSMemoryLoadOffset-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Class implementing the PUS service to load memory using base plus offset (PUS service type 6, subtype 1). 
<p>
This class adds to its superclass the implementation of the <em>raw data load mechanism</em>. Since the amount of data to be loaded will often be large, the fast version of this service is implemented. The data load mechanism interprets the application data in the telecommand packet and uses them to configure the internal data structure defined by the super class. The interpretation of the application data can result in the detection of inconsistencies or invalid data. These are reported by setting the <em>validity check code</em>. <p>
The PUS leaves some leeway in the definition of the structure of the application data for memory load telecommands. This implementation makes the following assumptions: <ul>
<li>
The memory ID field is always present and its type is <code>TD_PUSMemId</code>. </li>
<li>
The base field is a pointer and is four bytes long. </li>
<li>
The offset field is an integer of type <code>TD_PUSMemOffset</code>. </li>
<li>
The number of blocks field is an integer of type <code>TD_PUSNumberMemBlocks</code>. </li>
</ul>
The implementation of this class assumes type <code>TD_PUSMemId</code> to have size 1 (i.e. to be a <code>char</code> or an <code>unsigned char</code>). <dl compact><dt><b>Author:</b></dt><dd>Alessandro Pasetti (P&amp;P Software GmbH) </dd></dl>
<dl compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>

<p>

<p>
Definition at line <a class="el" href="DC__PUSMemoryLoadOffset_8h-source.html#l00042">42</a> of file <a class="el" href="DC__PUSMemoryLoadOffset_8h-source.html">DC_PUSMemoryLoadOffset.h</a>.<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDC__PUSMemoryLoadOffset.html#a0">DC_PUSMemoryLoadOffset</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Instantiate a PUS memory load using base offset telecommand.  <a href="#a0"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>virtual void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDC__PUSMemoryLoadOffset.html#a1">setRawData</a> (unsigned char *d, unsigned int n)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of the raw data load service.  <a href="#a1"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="BasicTypes_8h.html#a27">TD_PUSMemId</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDC__PUSMemoryLoadOffset.html#a2">getMemoryBlockId</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the memory block ID.  <a href="#a2"></a><br><br></td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="DC_PUSMemoryLoadOffset::DC_PUSMemoryLoadOffset" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> DC_PUSMemoryLoadOffset::DC_PUSMemoryLoadOffset           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Instantiate a PUS memory load using base offset telecommand. 
<p>
The class identifier and the telecommand subtype are set. The memory block ID is initialized to zero. 
<p>
Definition at line <a class="el" href="DC__PUSMemoryLoadOffset_8cpp-source.html#l00018">18</a> of file <a class="el" href="DC__PUSMemoryLoadOffset_8cpp-source.html">DC_PUSMemoryLoadOffset.cpp</a>.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a2" doxytag="DC_PUSMemoryLoadOffset::getMemoryBlockId" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="BasicTypes_8h.html#a27">TD_PUSMemId</a> DC_PUSMemoryLoadOffset::getMemoryBlockId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the memory block ID. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>the maximum number of blocks </dd></dl>

<p>
Definition at line <a class="el" href="DC__PUSMemoryLoadOffset_8cpp-source.html#l00082">82</a> of file <a class="el" href="DC__PUSMemoryLoadOffset_8cpp-source.html">DC_PUSMemoryLoadOffset.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="DC_PUSMemoryLoadOffset::setRawData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DC_PUSMemoryLoadOffset::setRawData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>d</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>n</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implementation of the raw data load service. 
<p>
This method would normally be called by a telecommand loader to load the application data into the the telecommand component. This method interprets the raw data as they are loaded and uses them to configure the data structure (defined by the super class) that holds the start address, the length, the checksum, and the memory load data for each block. The application data are constrained to fit within the data structures configured at the level of the superclass. Two such constraints apply:&lt;ul&gt; The number of bytes to be transferred (the value of argument n) must be greater than: <code>sizeof(TD_PUSMemId)+sizeof(TD_PUSMemData*)+sizeof(TD_PUSNumberMemBlocks)</code>. If this is not the case, the validity check code is set to VC_INCONSISTENT_RAW_DATA. The number of blocks must be less or equal than the maximum number of blocks defined in the super class. If this is not the case, the validity check code is set to VC_TOO_MANY_MEM_BLOCK. The total number of memory data to be loaded must not exceed the maximum value defined in the super class. If this is not the case, the validity check code is set to VC_TOO_MANY_MEM_DATA. The number of bytes to be transferred (the value of argument n) must be consistent with the number of blocks and of data inferred from the application data. If this is not the case, the validity check code is set to VC_INCONSISTENT_RAW_DATA.  When a constraint is violated, the method returns immediately after setting the value of the validity check code. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>n</em>&nbsp;</td><td>the number of bytes in the raw data </td></tr>
    <tr><td></td><td valign=top><em>d</em>&nbsp;</td><td>the starting address of the raw data </td></tr>
  </table>
</dl>

<p>
Reimplemented from <a class="el" href="classTelecommand.html#a17">Telecommand</a>.
<p>
Definition at line <a class="el" href="DC__PUSMemoryLoadOffset_8cpp-source.html#l00024">24</a> of file <a class="el" href="DC__PUSMemoryLoadOffset_8cpp-source.html">DC_PUSMemoryLoadOffset.cpp</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="DC__PUSMemoryLoadOffset_8h-source.html">DC_PUSMemoryLoadOffset.h</a><li><a class="el" href="DC__PUSMemoryLoadOffset_8cpp-source.html">DC_PUSMemoryLoadOffset.cpp</a></ul>
<center>
<b>Copyright 2003 <a href="http://www.pnp-software.com/" target="_parent">P&P Software GmbH</a> - All Rights Reserved</b>
</center>
