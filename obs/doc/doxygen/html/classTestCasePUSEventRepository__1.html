<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OBS Framework: TestCasePUSEventRepository_1 class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>TestCasePUSEventRepository_1 Class Reference</h1><code>#include &lt;<a class="el" href="TestCasePUSEventRepository__1_8h-source.html">TestCasePUSEventRepository_1.h</a>&gt;</code>
<p>
<p>Inheritance diagram for TestCasePUSEventRepository_1:
<p><center><img src="classTestCasePUSEventRepository__1.png" usemap="#TestCasePUSEventRepository_1_map" border="0" alt=""></center>
<map name="TestCasePUSEventRepository_1_map">
<area href="classTestCasePUSFull.html" alt="TestCasePUSFull" shape="rect" coords="0,224,194,248">
<area href="classTestCaseWithFactories.html" alt="TestCaseWithFactories" shape="rect" coords="0,168,194,192">
<area href="classTestCaseWithEvtCheck.html" alt="TestCaseWithEvtCheck" shape="rect" coords="0,112,194,136">
<area href="classTestCaseGenericSetUp.html" alt="TestCaseGenericSetUp" shape="rect" coords="0,56,194,80">
<area href="classTestCase.html" alt="TestCase" shape="rect" coords="0,0,194,24">
</map>
<a href="classTestCasePUSEventRepository__1-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Check the functionality of the <code><a class="el" href="classDC__PUSEventRepository.html">DC_PUSEventRepository</a></code> class. 
<p>
The test case retrieves the following items from its super class <code><a class="el" href="classTestCasePUSFull.html">TestCasePUSFull</a></code> or from the telecommand factory:&lt;ul&gt; The PUS event repository One instance of <code><a class="el" href="classDC__TestPUSTelecommand.html">DC_TestPUSTelecommand</a></code> One instance of <code><a class="el" href="classDC__DummyConfigurableManoeuvre.html">DC_DummyConfigurableManoeuvre</a></code>  The following specific checks are then performed:&lt;ol&gt; The correctness of the class identifier of the event repository is checked. The <code>create</code> method for telecommands is called repeatedly with the test telecommand as argument and with all possible event identifiers that this method can handle (see class comment of class <code>DC_PUSEventRepositor</code> for the full list). It is then checked that the correct telemetry package has been loaded in the immediate dispatch queue of the telemetry manager. For one of the repeated calls described at the previous bullet, it is also checked that the event counter is correctly updated and that an event of the correct type is stored in the event repository. Calls with "success events" (events that denote the successful acceptance, start, progress, or completion of a telecommand), the test is repeated twice, first with the associated acknowledge flag in the telecommand set to false and then to true and it is checked that telemetry packet dispatching is only performed in the latter case. A call to the create method for telecommands is performed when there are no more free <code>DC_PUSTcVerificationPackets</code> available in the telemetry factory and it is checked that the correct event is generated. The <code>create</code> method for manoeuvres is called repeatedly with the test telecommand as argument and with all possible event identifiers that this method can handle (see class comment of class <code>DC_PUSEventRepositor</code> for the full list). It is then checked that the correct telemetry package has been loaded in the immediate dispatch queue of the telemetry manager. For one of the repeated calls described at the previous bullet, it is also checked that the event counter is correctly updated and that an event of the correct type is stored in the event repository. Calls with "success events" (events that denote the successful acceptance, start, progress, or completion of a telecommand manoeuvre), the test is repeated twice, first with the associated acknowledge flag in the manoeuvre set to false and then to true and it is checked that telemetry packet dispatching is only performed in the latter case. A call to the create method for manoeuvre is performed when there are no more free <code>DC_PUSTcVerificationPackets</code> available in the telemetry factory and it is checked that the correct event is generated.  <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classDC__PUSEventRepository.html">DC_PUSEventRepository</a> </dd></dl>
<dl compact><dt><b>Author:</b></dt><dd>Alessandro Pasetti (P&amp;P Software GmbH) </dd></dl>
<dl compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>

<p>

<p>
Definition at line <a class="el" href="TestCasePUSEventRepository__1_8h-source.html#l00064">64</a> of file <a class="el" href="TestCasePUSEventRepository__1_8h-source.html">TestCasePUSEventRepository_1.h</a>.<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="a0" doxytag="TestCasePUSEventRepository_1::TestCasePUSEventRepository_1" ></a>
&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classTestCasePUSEventRepository__1.html#a0">TestCasePUSEventRepository_1</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the identifier and the name of the test case to, respectively, ID_PUSEVENTREPOSITORY*10+1 and "TestCasePUSEventRepository_1". <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>virtual void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classTestCasePUSEventRepository__1.html#a1">runTestCase</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Execute the test case.  <a href="#a1"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classTestCasePUSEventRepository__1.html#a2">checkTmPacket</a> (<a class="el" href="classDC__PUSEventRepository.html">DC_PUSEventRepository</a> *pEvtRep, <a class="el" href="BasicTypes_8h.html#a31">TD_TelemetrySubType</a> tmSubType, <a class="el" href="BasicTypes_8h.html#a9">TD_TelecommandId</a> tcId, <a class="el" href="BasicTypes_8h.html#a2">TD_ObsTime</a> tt, <a class="el" href="BasicTypes_8h.html#a14">TD_CheckCode</a> errCode)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check that the telemetry packet loaded by the argument PUS event repository in the telemetry manager is correctly configured.  <a href="#a2"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classTestCasePUSEventRepository__1.html#a3">checkNoTmPacket</a> (<a class="el" href="classDC__PUSEventRepository.html">DC_PUSEventRepository</a> *pEvtRep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check that no telemetry packets were loaded by the argument PUS event repository in the telemetry manager.  <a href="#a3"></a><br><br></td></tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a3" doxytag="TestCasePUSEventRepository_1::checkNoTmPacket" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool TestCasePUSEventRepository_1::checkNoTmPacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classDC__PUSEventRepository.html">DC_PUSEventRepository</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pEvtRep</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Check that no telemetry packets were loaded by the argument PUS event repository in the telemetry manager. 
<p>
The method retrieves the telemetry manager from the PUS event repository and then checks that it does not hold any items in the immediate dispatch queue. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>pEvtRep</em>&nbsp;</td><td>the PUS event repository </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if the no telemetry packet are found in the immediate dispatch queue of the telemetry manager </dd></dl>

<p>
Definition at line <a class="el" href="TestCasePUSEventRepository__1_8cpp-source.html#l00281">281</a> of file <a class="el" href="TestCasePUSEventRepository__1_8cpp-source.html">TestCasePUSEventRepository_1.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="TestCasePUSEventRepository_1::checkTmPacket" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool TestCasePUSEventRepository_1::checkTmPacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classDC__PUSEventRepository.html">DC_PUSEventRepository</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pEvtRep</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="BasicTypes_8h.html#a31">TD_TelemetrySubType</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tmSubType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="BasicTypes_8h.html#a9">TD_TelecommandId</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tcId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="BasicTypes_8h.html#a2">TD_ObsTime</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="BasicTypes_8h.html#a14">TD_CheckCode</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>errCode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Check that the telemetry packet loaded by the argument PUS event repository in the telemetry manager is correctly configured. 
<p>
The method retrieves the telemetry manager from the PUS event repository and then retrieves the telemetry packet from the telemetry manager. In addition to checking the parameters explicitly passed to the method, the type of the telemetry packet is also checked. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>pEvtRep</em>&nbsp;</td><td>the PUS event repository </td></tr>
    <tr><td></td><td valign=top><em>tmSubType</em>&nbsp;</td><td>the expected subtype of the telemetry packet </td></tr>
    <tr><td></td><td valign=top><em>tcId</em>&nbsp;</td><td>the expected identified of the telecommand whose execution is being reported </td></tr>
    <tr><td></td><td valign=top><em>tt</em>&nbsp;</td><td>the expected time tag of the telecommand whose execution is being reported </td></tr>
    <tr><td></td><td valign=top><em>errCode</em>&nbsp;</td><td>the expected error code of the telecommand (only checked for correctness if different from zero) </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if the telemetry packet is configured as expected </dd></dl>

<p>
Definition at line <a class="el" href="TestCasePUSEventRepository__1_8cpp-source.html#l00245">245</a> of file <a class="el" href="TestCasePUSEventRepository__1_8cpp-source.html">TestCasePUSEventRepository_1.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="TestCasePUSEventRepository_1::runTestCase" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TestCasePUSEventRepository_1::runTestCase           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Execute the test case. 
<p>
See class comment for details. 
<p>
Reimplemented from <a class="el" href="classTestCaseGenericSetUp.html#a2">TestCaseGenericSetUp</a>.
<p>
Definition at line <a class="el" href="TestCasePUSEventRepository__1_8cpp-source.html#l00035">35</a> of file <a class="el" href="TestCasePUSEventRepository__1_8cpp-source.html">TestCasePUSEventRepository_1.cpp</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="TestCasePUSEventRepository__1_8h-source.html">TestCasePUSEventRepository_1.h</a><li><a class="el" href="TestCasePUSEventRepository__1_8cpp-source.html">TestCasePUSEventRepository_1.cpp</a></ul>
<center>
<b>Copyright 2003 <a href="http://www.pnp-software.com/" target="_parent">P&P Software GmbH</a> - All Rights Reserved</b>
</center>
