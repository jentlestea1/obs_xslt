<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OBS Framework: TestCaseGenericSetUp.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>TestCaseGenericSetUp.cpp</h1><pre class="fragment"><div>00001 <span class="comment">//</span>
00002 <span class="comment">// Copyright 2004 P&amp;P Software GmbH - All Rights Reserved</span>
00003 <span class="comment">//</span>
00004 <span class="comment">// TestCaseGenericSetUp.cpp</span>
00005 <span class="comment">//</span>
00006 <span class="comment">// Version      1.0</span>
00007 <span class="comment">// Date         13.04.03</span>
00008 <span class="comment">// Author       A. Pasetti (P&amp;P Software)</span>
00009 
00010 <span class="preprocessor">#include "TestCaseGenericSetUp.h"</span>
00011 <span class="preprocessor">#include "TestCase.h"</span>
00012 <span class="preprocessor">#include "../GeneralInclude/CompilerSwitches.h"</span>
00013 <span class="preprocessor">#include "../GeneralInclude/TestConstants.h"</span>
00014 <span class="preprocessor">#include "../GeneralInclude/Constants.h"</span>
00015 <span class="preprocessor">#include "../Base/CC_RootObject.h"</span>
00016 <span class="preprocessor">#include "../Event/DC_EventRepository.h"</span>
00017 <span class="preprocessor">#include "../Data/DC_DummyDataPool.h"</span>
00018 <span class="preprocessor">#include "../Data/DC_DummyDatabase.h"</span>
00019 <span class="preprocessor">#include "../System/DC_DummyObsClock.h"</span>
00020 <span class="preprocessor">#include "../System/DC_DummyTracer.h"</span>
00021 <span class="preprocessor">#include "../Telemetry/PUSTelemetryPacket.h"</span>
00022 <span class="preprocessor">#include "../Telemetry/CC_TelemetryPacketFactory.h"</span>
00023 <span class="preprocessor">#include "../Telemetry/DC_PUSTcVerificationPacket.h"</span>
00024 <span class="preprocessor">#include "../Telemetry/DC_PUSDataReportingPacket.h"</span>
00025 <span class="preprocessor">#include "../Telemetry/DC_DummyPUSTelemetryPacket.h"</span>
00026 <span class="preprocessor">#include "../Telecommand/PUSTelecommand.h"</span>
00027 
00028 <span class="keywordtype">bool</span> TestCaseGenericSetUp::firstActivation = <span class="keyword">true</span>;
00029 
<a name="l00030"></a><a class="code" href="classTestCaseGenericSetUp.html#a0">00030</a> <a class="code" href="classTestCaseGenericSetUp.html#a0">TestCaseGenericSetUp::TestCaseGenericSetUp</a>(<span class="keywordtype">int</span> testId, <span class="keywordtype">char</span>* testName):
00031      <a class="code" href="classTestCase.html">TestCase</a>(testId,testName) {
00032      <span class="keywordflow">return</span>;
00033 }
00034 
<a name="l00035"></a><a class="code" href="classTestCaseGenericSetUp.html#a1">00035</a> <span class="keywordtype">bool</span> <a class="code" href="classTestCaseGenericSetUp.html#a1">TestCaseGenericSetUp::setUpTestCase</a>(<span class="keywordtype">void</span>) {
00036 
00037    <span class="keywordflow">if</span> (firstActivation) {
00038      <span class="comment">// Initialize the system list size in class CC_RootObject</span>
00039      CC_RootObject::setSystemListSize(<a class="code" href="Constants_8h.html#a31">MAX_N_OBJECTS</a>);
00040 
00041      <span class="comment">// Load an event repository into class CC_RootObject</span>
00042      <a class="code" href="classDC__EventRepository.html">DC_EventRepository</a>* pRep = <span class="keyword">new</span> <a class="code" href="classDC__EventRepository.html">DC_EventRepository</a>();
00043      <a class="code" href="classDC__DummyObsClock.html">DC_DummyObsClock</a>* pClk = <span class="keyword">new</span> <a class="code" href="classDC__DummyObsClock.html">DC_DummyObsClock</a>();
00044      pRep-&gt;<a class="code" href="classDC__EventRepository.html#a14">setObsClock</a>(pClk);
00045      pRep-&gt;<a class="code" href="classDC__EventRepository.html#a1">setRepositorySize</a>(<a class="code" href="TestConstants_8h.html#a7">EVT_REP_SIZE</a>);
00046 
00047      <span class="comment">// Load repository into CC_RootObject and check success</span>
00048      CC_RootObject::setEventRepository(pRep);
00049      <span class="keywordflow">if</span> ( <a class="code" href="classCC__RootObject.html#e4">CC_RootObject::getEventRepository</a>()!=pRep )
00050          <span class="keywordflow">return</span> <a class="code" href="TestConstants_8h.html#a3">INITIALIZATION_FAILURE</a>;
00051 
00052      <span class="comment">// Load a dummy database into class CC_RootObject and check success</span>
00053      <a class="code" href="classDC__DummyDatabase.html">DC_DummyDatabase</a>* pDB = <span class="keyword">new</span> <a class="code" href="classDC__DummyDatabase.html">DC_DummyDatabase</a>();
00054      CC_RootObject::setParameterDatabase(pDB);
00055      <span class="keywordflow">if</span> ( <a class="code" href="classCC__RootObject.html#e6">CC_RootObject::getParameterDatabase</a>()!=pDB )
00056          <span class="keywordflow">return</span> <a class="code" href="TestConstants_8h.html#a3">INITIALIZATION_FAILURE</a>;
00057 
00058      <span class="comment">// Load a dummy datapool into class CC_RootObject and check success</span>
00059      <a class="code" href="classDC__DummyDataPool.html">DC_DummyDataPool</a>* pDP = <span class="keyword">new</span> <a class="code" href="classDC__DummyDataPool.html">DC_DummyDataPool</a>();
00060      CC_RootObject::setDataPool(pDP);
00061      <span class="keywordflow">if</span> ( <a class="code" href="classCC__RootObject.html#e8">CC_RootObject::getDataPool</a>()!=pDP )
00062          <span class="keywordflow">return</span> <a class="code" href="TestConstants_8h.html#a3">INITIALIZATION_FAILURE</a>;
00063 
00064      <span class="comment">// Load a tracer into class CC_RootObject and check success</span>
00065      <a class="code" href="classDC__DummyTracer.html">DC_DummyTracer</a>* pTrc = <span class="keyword">new</span> <a class="code" href="classDC__DummyTracer.html">DC_DummyTracer</a>();
00066      CC_RootObject::setTracer(pTrc);
00067      <span class="keywordflow">if</span> ( <a class="code" href="classCC__RootObject.html#e10">CC_RootObject::getTracer</a>()!=pTrc )
00068          <span class="keywordflow">return</span> <a class="code" href="TestConstants_8h.html#a3">INITIALIZATION_FAILURE</a>;
00069 
00070      <span class="comment">// Configure the static part of PUS telecommand and telemetry classes</span>
00071      PUSTelemetryPacket::setDefaultDestination(<a class="code" href="TestConstants_8h.html#a22">TEST_TM_DEF_DEST</a>);
00072      PUSTelemetryPacket::setApplicationId(<a class="code" href="TestConstants_8h.html#a23">TEST_TM_APID</a>);
00073      PUSTelemetryPacket::setObsClock(pClk);
00074      PUSTelecommand::setApplicationId(<a class="code" href="TestConstants_8h.html#a24">TEST_TC_APID</a>);
00075 
00076      firstActivation = <span class="keyword">false</span>;
00077    }
00078 
00079         <span class="keywordflow">return</span> <a class="code" href="TestConstants_8h.html#a2">INITIALIZATION_SUCCESS</a>;
00080 }
00081 
<a name="l00082"></a><a class="code" href="classTestCaseGenericSetUp.html#a2">00082</a> <span class="keywordtype">void</span> <a class="code" href="classTestCaseGenericSetUp.html#a2">TestCaseGenericSetUp::runTestCase</a>(<span class="keywordtype">void</span>) {
00083      <span class="keywordflow">return</span>;
00084 }
00085 
<a name="l00086"></a><a class="code" href="classTestCaseGenericSetUp.html#a3">00086</a> <span class="keywordtype">bool</span> <a class="code" href="classTestCaseGenericSetUp.html#a3">TestCaseGenericSetUp::shutDownTestCase</a>(<span class="keywordtype">void</span>) {
00087      <span class="keywordflow">return</span> <a class="code" href="TestConstants_8h.html#a4">SHUTDOWN_SUCCESS</a>;
00088 }
</div></pre><center>
<b>Copyright 2003 <a href="http://www.pnp-software.com/" target="_parent">P&P Software GmbH</a> - All Rights Reserved</b>
</center>
