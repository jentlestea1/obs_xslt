<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OBS Framework: TestCaseTestPUSConfigurableManoeuvre_1.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>TestCaseTestPUSConfigurableManoeuvre_1.cpp</h1><pre class="fragment"><div>00001 <span class="comment">//</span>
00002 <span class="comment">// Copyright 2004 P&amp;P Software GmbH - All Rights Reserved</span>
00003 <span class="comment">//</span>
00004 <span class="comment">// TestCaseTestPUSConfigurableManoeuvre_1.cpp</span>
00005 <span class="comment">//</span>
00006 <span class="comment">// Version      1.0</span>
00007 <span class="comment">// Date         06.02.04</span>
00008 <span class="comment">// Author       A. Pasetti</span>
00009 
00010 <span class="preprocessor">#include "TestCaseTestPUSConfigurableManoeuvre_1.h"</span>
00011 <span class="preprocessor">#include "../GeneralInclude/ClassId.h"</span>
00012 <span class="preprocessor">#include "../GeneralInclude/Constants.h"</span>
00013 <span class="preprocessor">#include "../GeneralInclude/CompilerSwitches.h"</span>
00014 <span class="preprocessor">#include "../Utilities/TestCaseWithEvtCheck.h"</span>
00015 <span class="preprocessor">#include "../Manoeuvre/DC_TestPUSConfigurableManoeuvre.h"</span>
00016 
<a name="l00017"></a><a class="code" href="classTestCaseTestPUSConfigurableManoeuvre__1.html#a0">00017</a> <a class="code" href="classTestCaseTestPUSConfigurableManoeuvre__1.html#a0">TestCaseTestPUSConfigurableManoeuvre_1::TestCaseTestPUSConfigurableManoeuvre_1</a>(<span class="keywordtype">void</span>) :
00018         <a class="code" href="classTestCaseWithEvtCheck.html">TestCaseWithEvtCheck</a>(ID_TESTPUSCONFIGURABLEMANOEUVRE*10+1,
00019                                                  "<a class="code" href="classTestCaseTestPUSConfigurableManoeuvre__1.html">TestCaseTestPUSConfigurableManoeuvre_1</a>") {
00020         <span class="keywordflow">return</span>;
00021 }
00022 
<a name="l00023"></a><a class="code" href="classTestCaseTestPUSConfigurableManoeuvre__1.html#a1">00023</a> <span class="keywordtype">void</span> <a class="code" href="classTestCaseTestPUSConfigurableManoeuvre__1.html#a1">TestCaseTestPUSConfigurableManoeuvre_1::runTestCase</a>(<span class="keywordtype">void</span>) {
00024     <a class="code" href="classDC__TestPUSConfigurableManoeuvre.html">DC_TestPUSConfigurableManoeuvre</a> *pDCM=<span class="keyword">new</span> <a class="code" href="classDC__TestPUSConfigurableManoeuvre.html">DC_TestPUSConfigurableManoeuvre</a>();
00025 
00026     <span class="comment">// Verify correctness of class identifier</span>
00027     <span class="keywordflow">if</span> (pDCM-&gt;<a class="code" href="classCC__RootObject.html#a3">getClassId</a>()!=ID_TESTPUSCONFIGURABLEMANOEUVRE) {
00028                 setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"Wrong class identifier"</span>);
00029                 <span class="keywordflow">return</span>;
00030         }
00031 
00032         <span class="comment">// Check that the action counters are set to zero</span>
00033         <span class="keywordflow">if</span> (pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a10">getInitializationActionCounter</a>()!=0 ||
00034                 pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a11">getContinuationActionCounter</a>()  !=0 ||
00035                 pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a12">getTerminationActionCounter</a>()   !=0) {
00036                 setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"Action counter(s) not equal to zero"</span>);
00037                 <span class="keywordflow">return</span>;
00038         }
00039 
00040     <span class="comment">// Check completion and progress acknowledge flag values</span>
00041     <span class="keywordflow">if</span> (pDCM-&gt;<a class="code" href="classPUSTcManoeuvre.html#a3">isCompletionAckRequired</a>() || pDCM-&gt;<a class="code" href="classPUSTcManoeuvre.html#a2">isProgressAckRequired</a>() || pDCM-&gt;<a class="code" href="classPUSTcManoeuvre.html#a1">isStartAckRequired</a>() ) {
00042                 setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"Incorrect acknowledge flag default values"</span>);
00043                 <span class="keywordflow">return</span>;
00044         }
00045 
00046     <span class="comment">// Set and read back start, completion and progress acknowledge flag values</span>
00047     pDCM-&gt;<a class="code" href="classPUSTcManoeuvre.html#a4">setStartAckFlag</a>(<span class="keyword">true</span>);
00048     pDCM-&gt;<a class="code" href="classPUSTcManoeuvre.html#a5">setCompletionAckFlag</a>(<span class="keyword">true</span>);
00049     pDCM-&gt;<a class="code" href="classPUSTcManoeuvre.html#a6">setProgressAckFlag</a>(<span class="keyword">true</span>);
00050     <span class="keywordflow">if</span> (!pDCM-&gt;<a class="code" href="classPUSTcManoeuvre.html#a3">isCompletionAckRequired</a>() || !pDCM-&gt;<a class="code" href="classPUSTcManoeuvre.html#a2">isProgressAckRequired</a>()) {
00051                 setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"Incorrect acknowledge flag default values"</span>);
00052                 <span class="keywordflow">return</span>;
00053         }
00054 
00055     <span class="comment">// Set and read back telecommand identifier value</span>
00056     pDCM-&gt;<a class="code" href="classPUSTcManoeuvre.html#a8">setTelecommandId</a>(13);
00057     <span class="keywordflow">if</span> (pDCM-&gt;<a class="code" href="classPUSTcManoeuvre.html#a7">getTelecommandId</a>()!=13) {
00058                 setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"Incorrect telecommand ID value"</span>);
00059                 <span class="keywordflow">return</span>;
00060         }
00061 
00062         <span class="comment">// Verify the canStart() return value</span>
00063         pDCM-&gt;<a class="code" href="classManoeuvre.html#a9">setInUse</a>(<span class="keyword">true</span>);
00064         <span class="keywordflow">if</span> (pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a1">canStart</a>()!=<a class="code" href="Constants_8h.html#a17">MAN_CANNOT_START</a>) {
00065                 setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"Incorrect canStart() return value"</span>);
00066                 <span class="keywordflow">return</span>;
00067         }
00068 
00069         <span class="comment">// Verify that the initializationActionCounter is incremented</span>
00070         pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a2">initialize</a>();
00071         <span class="keywordflow">if</span> (pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a10">getInitializationActionCounter</a>()!=1) {
00072                 setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"initializationActionCounter not incremented"</span>);
00073                 <span class="keywordflow">return</span>;
00074         }
00075 
00076         <span class="comment">// Verify that the continuationActionCounter is incremented </span>
00077         pDCM-&gt;<a class="code" href="classManoeuvre.html#a5">doContinue</a>();
00078         <span class="keywordflow">if</span> (pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a11">getContinuationActionCounter</a>()!=1) {
00079                 setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"continuationActionCounter not incremented"</span>);
00080                 <span class="keywordflow">return</span>;
00081         }
00082 
00083         <span class="comment">// Verify a "manoeuvre progress event" is generated when the manoeuvre advances</span>
00084     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nEvt = this-&gt;<a class="code" href="classTestCaseWithEvtCheck.html#b0">getNumberOfEvents</a>();
00085         pDCM-&gt;<a class="code" href="classManoeuvre.html#a5">doContinue</a>();
00086         <span class="keywordflow">if</span> (pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a11">getContinuationActionCounter</a>()!=2) {
00087                 setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"continuationActionCounter not incremented"</span>);
00088                 <span class="keywordflow">return</span>;
00089         }
00090     <span class="keywordflow">if</span> (!verifyLatestEvent(nEvt+1,EVT_MAN_PROGRESS))   
00091         <span class="keywordflow">return</span>;
00092 
00093         <span class="comment">// Check that the continuation flag is properly set</span>
00094         <span class="keywordflow">if</span> (pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a3">canContinue</a>()!=<a class="code" href="Constants_8h.html#a19">MAN_CANNOT_CONTINUE</a>) {
00095                 setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"Incorrect canContinue() return value"</span>);
00096                 <span class="keywordflow">return</span>;
00097         }
00098 
00099         <span class="comment">// Check that the termination flag is properly set</span>
00100         <span class="keywordflow">if</span> (pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a4">isFinished</a>()!=<a class="code" href="Constants_8h.html#a21">MAN_HAS_NOT_TERMINATED</a>) {
00101                 setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"Incorrect isFinished() return value"</span>);
00102                 <span class="keywordflow">return</span>;
00103         }
00104 
00105         <span class="comment">// Verify that the terminationActionCounter is incremented</span>
00106         pDCM-&gt;<a class="code" href="classManoeuvre.html#a7">terminate</a>();
00107         <span class="keywordflow">if</span> (pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a12">getTerminationActionCounter</a>()!=1) {
00108                 setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"terminationActionCounter not incremented"</span>);
00109                 <span class="keywordflow">return</span>;
00110         }
00111 
00112         <span class="comment">// Check that the status flags can be modified</span>
00113     pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a5">setStartCheckStatus</a>(<a class="code" href="Constants_8h.html#a16">MAN_CAN_START</a>);
00114     pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a6">setContinuationCheckStatus</a>(<a class="code" href="Constants_8h.html#a18">MAN_CAN_CONTINUE</a>);
00115     pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a9">setTerminationCheckStatus</a>(<a class="code" href="Constants_8h.html#a20">MAN_HAS_TERMINATED</a>);
00116 
00117         pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a2">initialize</a>();
00118 
00119         <span class="keywordflow">if</span> (pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a1">canStart</a>()!=<a class="code" href="Constants_8h.html#a16">MAN_CAN_START</a>) {
00120                 setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"Incorrect canStart() return value"</span>);
00121                 <span class="keywordflow">return</span>;
00122         }
00123 
00124         pDCM-&gt;<a class="code" href="classManoeuvre.html#a5">doContinue</a>();
00125 
00126         <span class="keywordflow">if</span> (pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a3">canContinue</a>()!=<a class="code" href="Constants_8h.html#a18">MAN_CAN_CONTINUE</a>) {
00127                 setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"Incorrect canContinue() return value"</span>);
00128                 <span class="keywordflow">return</span>;
00129         }
00130 
00131         <span class="keywordflow">if</span> (pDCM-&gt;<a class="code" href="classDC__TestPUSConfigurableManoeuvre.html#a4">isFinished</a>()!=<a class="code" href="Constants_8h.html#a20">MAN_HAS_TERMINATED</a>) {
00132                 setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"Incorrect isFinished() return value"</span>);
00133                 <span class="keywordflow">return</span>;
00134         }
00135 
00136         pDCM-&gt;<a class="code" href="classManoeuvre.html#a7">terminate</a>();
00137 
00138         setTestResult(<a class="code" href="TestConstants_8h.html#a0">TEST_SUCCESS</a>,<span class="stringliteral">"Test Successful"</span>);
00139         <span class="keywordflow">return</span>;
00140 }
</div></pre><center>
<b>Copyright 2003 <a href="http://www.pnp-software.com/" target="_parent">P&P Software GmbH</a> - All Rights Reserved</b>
</center>
