<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OBS Framework: DC_PUSControlDataReporting class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>DC_PUSControlDataReporting Class Reference</h1><code>#include &lt;<a class="el" href="DC__PUSControlDataReporting_8h-source.html">DC_PUSControlDataReporting.h</a>&gt;</code>
<p>
<p>Inheritance diagram for DC_PUSControlDataReporting:
<p><center><img src="classDC__PUSControlDataReporting.png" usemap="#DC_PUSControlDataReporting_map" border="0" alt=""></center>
<map name="DC_PUSControlDataReporting_map">
<area href="classPUSTelecommand.html" alt="PUSTelecommand" shape="rect" coords="0,168,182,192">
<area href="classTelecommand.html" alt="Telecommand" shape="rect" coords="0,112,182,136">
<area href="classPunctualAction.html" alt="PunctualAction" shape="rect" coords="0,56,182,80">
<area href="classCC__RootObject.html" alt="CC_RootObject" shape="rect" coords="0,0,182,24">
</map>
<a href="classDC__PUSControlDataReporting-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
PUS telecommand to enable and disable the housekeeping and diagnostic data reporting telemetry packets. 
<p>
This class encapsulates the following subtypes of PUS service number 3:<ul>
<li>
Subtype 5: enable housekeeping parameter report generation </li>
<li>
Subtype 6: disable housekeeping parameter report generation </li>
<li>
Subtype 7: enable diagnostic parameter report generation </li>
<li>
Subtype 8: disable diagnostic parameter report generation </li>
</ul>
This class is configured at initialization time by setting the maximum number of SIDs that can be handled by a single instance of the telecommand. This is done through method <code>setMaxNumberSID</code>. A call to this method initializes the internal data structures that are used to hold the application data of the telecommand. <p>
During normal operation, configuration is performed using the <em>raw data load service</em>. <p>
This telecommand implements a <em>validity check</em> that returns "telecommand not valid" in case an attempt is made to load more application data than fit into the telecommand component or in case the application data are internally inconsistent. <p>
Execution of this telecommand can have two outcomes. The telecommand can either have a successful outcome (the return value of <code>doAction</code> is ACTION_SUCCESS) or it can fail (the return value of <code>doAction</code> is ACTION_FAILURE). A failure is declared if any of the SIDs provided to the telecommand do not correspond to a data reporting packet that is currently in use. <p>
The PUS specifies that the first item in the application data of this telecommand is the NSID field. The type of this field is not mandated by the standard. This class assumes it to be of type <code>unsigned char</code>. The standard also allows this field to be omitted. This class however requires this field to be always present. <dl compact><dt><b>Author:</b></dt><dd>Alessandro Pasetti (P&amp;P Software GmbH) </dd></dl>
<dl compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>

<p>

<p>
Definition at line <a class="el" href="DC__PUSControlDataReporting_8h-source.html#l00055">55</a> of file <a class="el" href="DC__PUSControlDataReporting_8h-source.html">DC_PUSControlDataReporting.h</a>.<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDC__PUSControlDataReporting.html#a0">DC_PUSControlDataReporting</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Instantiate a control data reporting PUS telecommand.  <a href="#a0"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDC__PUSControlDataReporting.html#a1">setMaxNumberSID</a> (unsigned char max)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the maximum number of SIDs that can be processed by this telecommand.  <a href="#a1"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>unsigned int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDC__PUSControlDataReporting.html#a2">getMaxNumberSID</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the maximum number of SIDs that can be processed by this telecommand.  <a href="#a2"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>virtual void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDC__PUSControlDataReporting.html#a3">setRawData</a> (unsigned int i, unsigned char d)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of the raw data load service.  <a href="#a3"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>virtual unsigned int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDC__PUSControlDataReporting.html#a4">getNumberOfRawData</a> (void) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the number of raw data bytes that can be loaded with the raw telecommand data load service.  <a href="#a4"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>virtual bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDC__PUSControlDataReporting.html#a5">isObjectConfigured</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Perform a class-specific configuration check on the telecommand: check that the maximum number of SIDs that can be processed by the telecommand has been set.  <a href="#a5"></a><br><br></td></tr>
<tr><td colspan=2><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>virtual <a class="el" href="BasicTypes_8h.html#a5">TD_ActionOutcome</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDC__PUSControlDataReporting.html#b0">doAction</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Depending on the subtype of the telecommand, enable or disable the data reporting packets.  <a href="#b0"></a><br><br></td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="DC_PUSControlDataReporting::DC_PUSControlDataReporting" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> DC_PUSControlDataReporting::DC_PUSControlDataReporting           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Instantiate a control data reporting PUS telecommand. 
<p>
The class identifier is set. The values of the internal data structure that is used to hold the telecommand application data is initialized to illegal values to signify that the telecommand is not yet configured. The telecommand type is set to PUS_TYPE_DATA_REP. 
<p>
Definition at line <a class="el" href="DC__PUSControlDataReporting_8cpp-source.html#l00017">17</a> of file <a class="el" href="DC__PUSControlDataReporting_8cpp-source.html">DC_PUSControlDataReporting.cpp</a>.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b0" doxytag="DC_PUSControlDataReporting::doAction" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="BasicTypes_8h.html#a5">TD_ActionOutcome</a> DC_PUSControlDataReporting::doAction           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Depending on the subtype of the telecommand, enable or disable the data reporting packets. 
<p>
A pseudo-code implementation for this method is as follows:&lt;PRE&gt; outcome = ACTION_SUCCESS; for (all SIDs stored in the telecommand) { retrieve data reporting packet from telemetry packet factory; if (no packet is returned by the factory ) outcome = ACTION_FAILURE: if ( (telecommand subtype==PUS_ST_DATA_REP_ENB_HK) || (telecommand subtype==PUS_ST_DATA_REP_ENB_DG) ) enable the data reporting packet returned by the factory; else disable the data reporting packet returned by the factory; } return outcome; The telecommand is configured with a list of SIDs and with a telecommand subtype. Depending on the subtype, the telecommand will either enable or disable the data reporting packets identified by the SIDs. The data reporting packets are retrieved from the telemetry packet factory (instance of class <code><a class="el" href="classCC__TelemetryPacketFactory.html">CC_TelemetryPacketFactory</a></code>). Enabling and disabling of the data reporting packets is done through method <code>setEnabled</code> declared by class <code><a class="el" href="classDC__PUSDataReportingPacket.html">DC_PUSDataReportingPacket</a></code>. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classDC__PUSDataReportingPacket.html#a1">DC_PUSDataReportingPacket::setEnabled</a> <p>
<a class="el" href="classCC__TelemetryPacketFactory.html">CC_TelemetryPacketFactory</a> <p>
<a class="el" href="classPunctualAction.html#a1">PunctualAction::execute</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>the execution outcome of the telecommand </dd></dl>

<p>
Implements <a class="el" href="classPunctualAction.html#b0">PunctualAction</a>.
<p>
Definition at line <a class="el" href="DC__PUSControlDataReporting_8cpp-source.html#l00077">77</a> of file <a class="el" href="DC__PUSControlDataReporting_8cpp-source.html">DC_PUSControlDataReporting.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="DC_PUSControlDataReporting::getMaxNumberSID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> unsigned int DC_PUSControlDataReporting::getMaxNumberSID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the maximum number of SIDs that can be processed by this telecommand. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classDC__PUSControlDataReporting.html#a1">setMaxNumberSID</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>the maximum number of SIDs </dd></dl>

<p>
Definition at line <a class="el" href="DC__PUSControlDataReporting_8cpp-source.html#l00038">38</a> of file <a class="el" href="DC__PUSControlDataReporting_8cpp-source.html">DC_PUSControlDataReporting.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="DC_PUSControlDataReporting::getNumberOfRawData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> unsigned int DC_PUSControlDataReporting::getNumberOfRawData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return the number of raw data bytes that can be loaded with the raw telecommand data load service. 
<p>
The value returned by this class is equal to: <code>M*sizeof(TD_SID)+1</code> where M is the maximum number of SIDs defined by method <code>setMaxNumberSID</code>. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classDC__PUSControlDataReporting.html#a3">setRawData</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>the number of raw data bytes to be loaded with the raw data load service </dd></dl>

<p>
Reimplemented from <a class="el" href="classTelecommand.html#a16">Telecommand</a>.
<p>
Definition at line <a class="el" href="DC__PUSControlDataReporting_8cpp-source.html#l00073">73</a> of file <a class="el" href="DC__PUSControlDataReporting_8cpp-source.html">DC_PUSControlDataReporting.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="DC_PUSControlDataReporting::isObjectConfigured" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool DC_PUSControlDataReporting::isObjectConfigured           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Perform a class-specific configuration check on the telecommand: check that the maximum number of SIDs that can be processed by the telecommand has been set. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>true if the telecommand is configured, false otherwise </dd></dl>

<p>
Reimplemented from <a class="el" href="classPUSTelecommand.html#a17">PUSTelecommand</a>.
<p>
Definition at line <a class="el" href="DC__PUSControlDataReporting_8cpp-source.html#l00102">102</a> of file <a class="el" href="DC__PUSControlDataReporting_8cpp-source.html">DC_PUSControlDataReporting.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="DC_PUSControlDataReporting::setMaxNumberSID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DC_PUSControlDataReporting::setMaxNumberSID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>max</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the maximum number of SIDs that can be processed by this telecommand. 
<p>
This is an initialization method that should only be called once. A call to this method causes the internal data structures where the SIDs are held to be allocated and initialized. Only positive values of the method argument are legal. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>max</em>&nbsp;</td><td>the maximum number of SIDs </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="DC__PUSControlDataReporting_8cpp-source.html#l00027">27</a> of file <a class="el" href="DC__PUSControlDataReporting_8cpp-source.html">DC_PUSControlDataReporting.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="DC_PUSControlDataReporting::setRawData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DC_PUSControlDataReporting::setRawData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>unsigned char&nbsp;</td>
          <td class="mdname" nowrap> <em>d</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implementation of the raw data load service. 
<p>
This method would normally be called by a telecommand loader to load the application data into the the telecommand component. This method interprets the raw data as they are loaded and uses them to construct the sequence of SIDs of the data reporting packets that have to be enabled or disabled. This method assumes that the raw data are loaded in sequence starting from the first one (i.e. the value of i in the first call is zero and succesive calls use values of i that are incremented by one at each call). The value of i is also constrained to lie in the range [0,N] where N is computed as follows: <pre>
      N = M*sizeof(TD_SID)  </pre> where M is the maximum number of SIDs defined by method <code>setMaxNumberSID</code>. If the number of SIDs in the telecommand packet exceeds the maximum defined with method <code>setMaxNumberSID</code>, the telecommand is declared to be invalid with validity check code equal to VC_TOO_MANY_SIDS. If an attempt is made to load a greater number of raw data, the telecommand is declared to be invalid with validity check code equal to VC_TOO_MANY_RAW_DATA. Finally, the total number of loaded raw data T must be consistent with the number of SIDs (the first byte in the telecommand packet). If this is not the case, then the telecommand is declared invalid with validity check code equal to VC_INCONSISTENT_RAW_DATA. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classDC__PUSControlDataReporting.html#a4">getNumberOfRawData</a> </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>i</em>&nbsp;</td><td>the index of the raw telecommand data </td></tr>
    <tr><td></td><td valign=top><em>d</em>&nbsp;</td><td>the raw data </td></tr>
  </table>
</dl>

<p>
Reimplemented from <a class="el" href="classTelecommand.html#a15">Telecommand</a>.
<p>
Definition at line <a class="el" href="DC__PUSControlDataReporting_8cpp-source.html#l00042">42</a> of file <a class="el" href="DC__PUSControlDataReporting_8cpp-source.html">DC_PUSControlDataReporting.cpp</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="DC__PUSControlDataReporting_8h-source.html">DC_PUSControlDataReporting.h</a><li><a class="el" href="DC__PUSControlDataReporting_8cpp-source.html">DC_PUSControlDataReporting.cpp</a></ul>
<center>
<b>Copyright 2003 <a href="http://www.pnp-software.com/" target="_parent">P&P Software GmbH</a> - All Rights Reserved</b>
</center>
