<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OBS Framework: CC_FSM class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>CC_FSM Class Reference<br>
<small>
[<a class="el" href="group__FSM.html">Finite State Machines</a>]</small>
</h1><code>#include &lt;<a class="el" href="CC__FSM_8h-source.html">CC_FSM.h</a>&gt;</code>
<p>
<p>Inheritance diagram for CC_FSM:
<p><center><img src="classCC__FSM.png" usemap="#CC_FSM_map" border="0" alt=""></center>
<map name="CC_FSM_map">
<area href="classCC__RootObject.html" alt="CC_RootObject" shape="rect" coords="0,0,99,24">
</map>
<a href="classCC__FSM-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
This class encapsulates a finite state machine or FSM. 
<p>
This class implements the <code>FSM</code> core component. <p>
The FSM is responsible for controlling the transition among the states of the finite state machine and for controlling the execution of the actions associated to these states. The states associated to the FSM are loaded into the FSM during the object configuration. The states associated to the FSM are represented by objects of type <code><a class="el" href="classFsmState.html">FsmState</a></code>. The states associated to the FSM are referred to using integers in the range [0,N-1] where N is the total number of states in the FSM. The 0-th state is by convention the initial state of the FSM. The <em>current state</em> is the state that is active at a particular point in time. <p>
The FMS is intended to be periodically <em>activated</em> by an external entity (perhaps a scheduler). When it is activated, the FSM executes the actions associated to the current state and, if appropriate, it performs a state transition. State transitions can be either <em>autonomous</em> or they can be <em>requested</em>. An autonomous state transition takes place when the current state declares it has terminated all its actions (its <code>isFinished</code> method returns true) and it has a non-null next state. In that case, the FSM performs a transition to the next state offered by the current state. A requested state transition is started when an outside entity (typically, an FsmEvent object) calls method <code>makeTransitionRequest</code>. State transitions take place only when the FSM is activated. Thus, calls to <code>makeTransitionRequest</code> should really be seen as requests for transitions that are buffered and executed when the FSM is activated. If several such state transition requests are made, only the last one will be executed. A transition - either requested or autonomous - takes place only if all the following conditions are satisfied: the transition is enabled, the exit check for the current state returns "exit OK", the entry check for the target state returns "entry OK". <p>
Enabling or disabling of state transitions can be done only in the sense of enabling/disabling the transitions <em>into</em> a particular state or of disabling transitions <em>tout court</em>. That is, it is not possible to enable/disable transitions <em>between</em> particular states. <p>
State transitions can be disabled at two levels. It is possible to disable all transitions into a certain target state or it is possible to disable transitions between two specific states. <p>
The FSM creates event reports to record the following occurrences: a state transition has been performed. <p>
The initialization sequence of an FSM is as follows: <ul>
<li>
The number of states is set by calling <code>setNumberOfStates</code> </li>
<li>
The states are loaded by repeatedly calling <code>setState</code> </li>
<li>
The current state is set to its initial default value by calling <code>reset</code> </li>
</ul>
In all cases, the <em>event originator</em> is the FSM component itself. <p>
The initialization sequence must be performed following the order given above. The FSM object is intended to be used "as is" and without changes. All its methods are accordingly declared to be final (i.e. non-virtual). <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classFsmState.html">FsmState</a> </dd></dl>
<dl compact><dt><b>Author:</b></dt><dd>Alessandro Pasetti (P&amp;P Software GmbH) </dd></dl>
<dl compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>

<p>

<p>
Definition at line <a class="el" href="CC__FSM_8h-source.html#l00096">96</a> of file <a class="el" href="CC__FSM_8h-source.html">CC_FSM.h</a>.<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classCC__FSM.html#a0">CC_FSM</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Instantiate a finite state machine (FSM).  <a href="#a0"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classCC__FSM.html#a1">reset</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Bring the FSM to its initial state (ie the state with index 0) and enable all state transitions.  <a href="#a1"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="a2" doxytag="CC_FSM::isObjectConfigured" ></a>
virtual bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classCC__FSM.html#a2">isObjectConfigured</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Perform a class-specific configuration check on an FSM object: verify that the number of states has a legal value and that all <a class="el" href="classFsmState.html">FsmState</a> objects have been loaded. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classCC__FSM.html#a3">setNumberOfStates</a> (<a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a> numberOfStates)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the number of states to be managed by the FSM.  <a href="#a3"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classCC__FSM.html#a4">getNumberOfStates</a> (void) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of states to be managed by the FSM.  <a href="#a4"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classCC__FSM.html#a5">setState</a> (<a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a> i, <a class="el" href="classFsmState.html">FsmState</a> *state)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load the i-th state into the FSM.  <a href="#a5"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classFsmState.html">FsmState</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classCC__FSM.html#a6">getState</a> (<a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a> i) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the <a class="el" href="classFsmState.html">FsmState</a> associated to the i-th state of the FSM.  <a href="#a6"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classCC__FSM.html#a7">getCurrentState</a> (void) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the current state.  <a href="#a7"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classCC__FSM.html#a8">setTransitionEnableStatus</a> (bool enabled)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable/disable all state transitions.  <a href="#a8"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classCC__FSM.html#a9">setTransitionEnableStatus</a> (<a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a> toState, bool enabled)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable/disable transitions to the <code>toState</code>-th state.  <a href="#a9"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classCC__FSM.html#a10">isTransitionEnabled</a> (void) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check whether state transitions are enabled.  <a href="#a10"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classCC__FSM.html#a11">isTransitionEnabled</a> (<a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a> toState) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check whether a transition from the current state to the argument target state is enabled.  <a href="#a11"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classCC__FSM.html#a12">makeTransitionRequest</a> (<a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a> targetState)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lodge a request for a transition to the argument target state.  <a href="#a12"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classCC__FSM.html#a13">activate</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Activate the FSM: execute the actions associated to the current state and perform a state transition if required.  <a href="#a13"></a><br><br></td></tr>
<tr><td colspan=2><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classCC__FSM.html#b0">tryTransition</a> (<a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a> targetState)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Try to perform a state transtion from the current state to the target state.  <a href="#b0"></a><br><br></td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="CC_FSM::CC_FSM" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CC_FSM::CC_FSM           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Instantiate a finite state machine (FSM). 
<p>
The number of states is initialized to an illegal value to signify that the finite state machine is not yet configured. 
<p>
Definition at line <a class="el" href="CC__FSM_8cpp-source.html#l00021">21</a> of file <a class="el" href="CC__FSM_8cpp-source.html">CC_FSM.cpp</a>.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a13" doxytag="CC_FSM::activate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CC_FSM::activate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Activate the FSM: execute the actions associated to the current state and perform a state transition if required. 
<p>
An event report is created when a state transition takes place. This method would typically be called by an external scheduler. A pseudo-code implementation for this method is as follows: <pre>
   if (transition request pending)   // request lodged to make transition
                                     // to some targetState
   {  <a class="el" href="classCC__FSM.html#b0">tryTransition(targetState)</a>;
      currentState.doContinue();
      return;
   }
   if ( (currentState.isFinished()) &amp;&amp;
         (currentState.getNextState()!=pNULL) )
      tryTransition(currentState.getNextState());
   currentState.doContinue();
   return; </pre> <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classCC__FSM.html#b0">tryTransition</a> </dd></dl>

<p>
Definition at line <a class="el" href="CC__FSM_8cpp-source.html#l00132">132</a> of file <a class="el" href="CC__FSM_8cpp-source.html">CC_FSM.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="CC_FSM::getCurrentState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a> CC_FSM::getCurrentState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the current state. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>the current state of the FSM </dd></dl>

<p>
Definition at line <a class="el" href="CC__FSM__inl_8h-source.html#l00024">24</a> of file <a class="el" href="CC__FSM__inl_8h-source.html">CC_FSM_inl.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="CC_FSM::getNumberOfStates" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a> CC_FSM::getNumberOfStates           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the number of states to be managed by the FSM. 
<p>
If the number of states has not yet been set, a negative value is returned. <p>
<dl compact><dt><b>Returns:</b></dt><dd>the number of states managed by the FSM </dd></dl>

<p>
Definition at line <a class="el" href="CC__FSM_8cpp-source.html#l00092">92</a> of file <a class="el" href="CC__FSM_8cpp-source.html">CC_FSM.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="CC_FSM::getState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classFsmState.html">FsmState</a> * CC_FSM::getState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>i</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the <a class="el" href="classFsmState.html">FsmState</a> associated to the i-th state of the FSM. 
<p>
The index <code>i</code> should denote a legal state (ie. it should lie in the interval [0,N-1] where N is the total number of states). No check on its legality is performed. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classCC__FSM.html#a5">setState</a> </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>i</em>&nbsp;</td><td>the state indicator </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the <a class="el" href="classFsmState.html">FsmState</a> associated to the i-th state </dd></dl>

<p>
Definition at line <a class="el" href="CC__FSM__inl_8h-source.html#l00018">18</a> of file <a class="el" href="CC__FSM__inl_8h-source.html">CC_FSM_inl.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="CC_FSM::isTransitionEnabled" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool CC_FSM::isTransitionEnabled           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>toState</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Check whether a transition from the current state to the argument target state is enabled. 
<p>
The index <code>toState</code> should denote a legal state (ie. it should lie in the interval [0,N-1] where N is the total number of states). No check on its legality is performed. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classCC__FSM.html#a13">activate</a> </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>toState</em>&nbsp;</td><td>the target state </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if a transition from the current into the target state is enabled </dd></dl>

<p>
Definition at line <a class="el" href="CC__FSM__inl_8h-source.html#l00029">29</a> of file <a class="el" href="CC__FSM__inl_8h-source.html">CC_FSM_inl.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="CC_FSM::isTransitionEnabled" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool CC_FSM::isTransitionEnabled           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Check whether state transitions are enabled. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classCC__FSM.html#a8">setTransitionEnableStatus</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if state transitions are enabled, false otherwise </dd></dl>

<p>
Definition at line <a class="el" href="CC__FSM__inl_8h-source.html#l00035">35</a> of file <a class="el" href="CC__FSM__inl_8h-source.html">CC_FSM_inl.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="CC_FSM::makeTransitionRequest" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CC_FSM::makeTransitionRequest           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>targetState</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Lodge a request for a transition to the argument target state. 
<p>
The transition will be considered for execution at the next activation of the FSM. If a previous transition request had already been done, it is lost. Only the last request is preserved and will be considered at activation time. The index <code>targetState</code> should denote a legal state (ie. it should lie in the interval [0,N-1] where N is the total number of states). If an illegal value is used, then the method generates an event report of type EVT_ILLEGAL_ST and returns without taking any action. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classCC__FSM.html#a13">activate</a> </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>targetState</em>&nbsp;</td><td>the target state for the requested transition </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="CC__FSM_8cpp-source.html#l00121">121</a> of file <a class="el" href="CC__FSM_8cpp-source.html">CC_FSM.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="CC_FSM::reset" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CC_FSM::reset           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Bring the FSM to its initial state (ie the state with index 0) and enable all state transitions. 
<p>
Unless the method is called just after the FSM was instantiated, a termination action is performed on the state in which the FSM is at the time the method is called. The initialization action is performed on the initial state. Finally, a call to this method causes the <code>nextState</code> array to be loaded. Element <code>nextState[i]</code> holds the index of the next state associated to the i-th state. This array is useful to speed up execution of an autonomous state transition (see method <code>activate</code> in this class). When an autonomous state transition is executed, the FSM asks the <code>currentState</code> for its associated <code>nextState</code> and makes a transition to this <code>nextState</code>. The transition however can be done efficiently only if the target state is specified through its index. The <code>nextState</code> array makes precisely this information available. Note that, as a consequence, changes to the <code>nextState</code> associated to a given state become active only after the FSM has been reset. <p>
The execution time of this method grows quadratically with the number of states in the FSM. <p>
A pseudo-code implementation for this method is as follows: <pre>
   for (all states in the FSM)
      transitionEnabled[i] = ENABLED;
   for (all states in the FSM)
      nextState[i] = index of ( state[i].getNextState() );
   if (!initialization)
      currentState.doExit();
   currentState=initialState;
   currentState.doInit(); </pre> Note that no exit check is performed on the <code>currentState</code> and no entry check is performed on the initial state. <p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000035">Todo:</a></b></dt><dd>the implementation of this method is not robust against any of the states having been loaded with an illegal nextState. It is not clear whether this kind of robustness should be built into the method since an illegal nextState would typically be the result of a configuration error and the framework classes are not requierd to be robust against configuration errors (but there should at least be an assertion-level protection).</dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classCC__FSM.html#a13">activate</a> </dd></dl>

<p>
Definition at line <a class="el" href="CC__FSM_8cpp-source.html#l00029">29</a> of file <a class="el" href="CC__FSM_8cpp-source.html">CC_FSM.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="CC_FSM::setNumberOfStates" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CC_FSM::setNumberOfStates           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>numberOfStates</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the number of states to be managed by the FSM. 
<p>
The FSM maintains an internal data structure where all <a class="el" href="classFsmState.html">FsmState</a> objects are held. This method causes memory for this data structure to be allocated and the data structure to be initialized. The number of states must be greater than zero. <p>
This is an initialization method. It should only be called once. <p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>numberOfStates</em>&nbsp;</td><td>the number of states to be managed by the FSM </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="CC__FSM_8cpp-source.html#l00069">69</a> of file <a class="el" href="CC__FSM_8cpp-source.html">CC_FSM.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="CC_FSM::setState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CC_FSM::setState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classFsmState.html">FsmState</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>state</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Load the i-th state into the FSM. 
<p>
The state to be loaded is seen as an instance of the abstract class <code><a class="el" href="classFsmState.html">FsmState</a></code>. The index <code>i</code> should denote a legal state (ie. it should lie in the interval [0,N-1] where N is the total number of states). If an illegal value of i is used, then the method generates an event report of type EVT_ILLEGAL_ST and returns without taking any action. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classCC__FSM.html#a3">setNumberOfStates</a> </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>i</em>&nbsp;</td><td>the state to be loaded </td></tr>
    <tr><td></td><td valign=top><em>state</em>&nbsp;</td><td>the <a class="el" href="classFsmState.html">FsmState</a> object to be loaded </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="CC__FSM_8cpp-source.html#l00096">96</a> of file <a class="el" href="CC__FSM_8cpp-source.html">CC_FSM.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="CC_FSM::setTransitionEnableStatus" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CC_FSM::setTransitionEnableStatus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>toState</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>enabled</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enable/disable transitions to the <code>toState</code>-th state. 
<p>
Both requested and autonomous transitions are disabled. The index <code>toState</code> should denote a legal state (ie. it should lie in the interval [0,N-1] where N is the total number of states). If an illegal value is used, then the method generates an event report of type EVT_ILLEGAL_ST and returns without taking any action. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classCC__FSM.html#a13">activate</a> </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>toState</em>&nbsp;</td><td>the state into which transitions are enabled/disabled </td></tr>
    <tr><td></td><td valign=top><em>enabled</em>&nbsp;</td><td>the transition is disabled if false, enabled if true </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="CC__FSM_8cpp-source.html#l00107">107</a> of file <a class="el" href="CC__FSM_8cpp-source.html">CC_FSM.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="CC_FSM::setTransitionEnableStatus" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CC_FSM::setTransitionEnableStatus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>enabled</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enable/disable all state transitions. 
<p>
Both requested and autonomous transitions are disabled. <p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classCC__FSM.html#a13">activate</a> </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>enabled</em>&nbsp;</td><td>the transition are disabled if false, enabled if true </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="CC__FSM_8cpp-source.html#l00117">117</a> of file <a class="el" href="CC__FSM_8cpp-source.html">CC_FSM.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="CC_FSM::tryTransition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CC_FSM::tryTransition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="BasicTypes_8h.html#a6">TD_FsmStateIndex</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>targetState</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Try to perform a state transtion from the current state to the target state. 
<p>
The transition is performed if all the following conditions are satisfied: the transition is enabled, the exit check for the current state returns "exit OK", the entry check for the target state returns "entry OK". If a transition is performed, an event report is created to record the fact. Event reports are also created when the state transition fails. A pseudo-code implementation for this method is as follows: <pre>
   if (!isTransitionEnabled())
   {  createEventReport(EVT_FSM_ALL_TRANSITION_DISABLED);
      return;
   }
   if (!isTransitionEnabled(targetState))
   {  createEventReport(EVT_FSM_TRANSITION_DISABLED);
      return;
   }
   if (!currentState.canExit())
   {  createEventReport(EVT_FSM_EXIT_FAILED);
      return;
   }
   if (!targetState.canEnter())
   {  createEventReport(EVT_FSM_ENTER_FAILED)
      return;
   }
   currentState.doExit();
   currentState=targetState;
   currentState.doInit();
   createEventReport(EVT_FSM_TRANSITION);
   return; </pre> The index <code>targetState</code> should denote a legal state (ie. it should lie in the interval [0,N-1] where N is the total number of states). No check on its legality is performed. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classCC__FSM.html#a13">activate</a> </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>targetState</em>&nbsp;</td><td>the target state </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="CC__FSM_8cpp-source.html#l00151">151</a> of file <a class="el" href="CC__FSM_8cpp-source.html">CC_FSM.cpp</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="CC__FSM_8h-source.html">CC_FSM.h</a><li><a class="el" href="CC__FSM_8cpp-source.html">CC_FSM.cpp</a><li><a class="el" href="CC__FSM__inl_8h-source.html">CC_FSM_inl.h</a></ul>
<center>
<b>Copyright 2003 <a href="http://www.pnp-software.com/" target="_parent">P&P Software GmbH</a> - All Rights Reserved</b>
</center>
