<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OBS Framework: TestCaseSampleMonitoredDataPool_1.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>TestCaseSampleMonitoredDataPool_1.cpp</h1><pre class="fragment"><div>00001   
00002 <span class="comment">//</span>
00003 <span class="comment">// Copyright 2003 P&amp;P Software GmbH - All Rights Reserved</span>
00004 <span class="comment">//</span>
00005 <span class="comment">// TestCaseSampleMonitoredDataPool_1.h</span>
00006 <span class="comment">//</span>
00007 <span class="comment">// Version      1.0</span>
00008 <span class="comment">// Date         10.09.03 (Version 1.0)</span>
00009 <span class="comment">// Author       A. Pasetti (P&amp;P Software)</span>
00010 <span class="comment">//</span>
00011 
00012 <span class="preprocessor">#include "../GeneralInclude/CompilerSwitches.h"</span>
00013 <span class="preprocessor">#include "../GeneralInclude/ClassId.h"</span>
00014 <span class="preprocessor">#include "../GeneralInclude/Constants.h"</span>
00015 <span class="preprocessor">#include "../Data/DC_SampleMonitoredDataPool.h"</span>
00016 <span class="preprocessor">#include "../Data/DC_DataItem.h"</span>
00017 <span class="preprocessor">#include "../System/DC_DummyObsClock.h"</span>
00018 <span class="preprocessor">#include "../FDIR/DC_NullProfile.h"</span>
00019 <span class="preprocessor">#include "../FDIR/DC_NullRecoveryAction.h"</span>
00020 <span class="preprocessor">#include "TestCaseSampleMonitoredDataPool_1.h"</span>
00021 <span class="preprocessor">#include "../Utilities/TestCaseWithEvtCheck.h"</span>
00022 
00023 <span class="preprocessor">#include &lt;math.h&gt;</span>
00024 <span class="preprocessor">#include &lt;float.h&gt;</span>
00025 
<a name="l00026"></a><a class="code" href="classTestCaseSampleMonitoredDataPool__1.html#a0">00026</a> <a class="code" href="classTestCaseSampleMonitoredDataPool__1.html#a0">TestCaseSampleMonitoredDataPool_1::TestCaseSampleMonitoredDataPool_1</a>():
00027       <a class="code" href="classTestCaseWithEvtCheck.html">TestCaseWithEvtCheck</a>(ID_SAMPLEMONITOREDDATAPOOL*10+1,"<a class="code" href="classTestCaseSampleMonitoredDataPool__1.html">TestCaseSampleMonitoredDataPool_1</a>") {
00028             <span class="keywordflow">return</span>;
00029 }
00030 
<a name="l00031"></a><a class="code" href="classTestCaseSampleMonitoredDataPool__1.html#a1">00031</a> <span class="keywordtype">void</span> <a class="code" href="classTestCaseSampleMonitoredDataPool__1.html#a1">TestCaseSampleMonitoredDataPool_1::runTestCase</a>() {
00032 
00033     <span class="comment">// Variable to hold the number of events</span>
00034     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nEvt;
00035     nEvt = <a class="code" href="classTestCaseWithEvtCheck.html#b0">getNumberOfEvents</a>();
00036 
00037     <span class="comment">// Variable to hold number of parameters in the data pool</span>
00038     <a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a> numberOfPar = 8;
00039 
00040     <span class="comment">// Instantiate datapool</span>
00041     <a class="code" href="classDC__SampleMonitoredDataPool.html">DC_SampleMonitoredDataPool</a>* pDP = <span class="keyword">new</span> <a class="code" href="classDC__SampleMonitoredDataPool.html">DC_SampleMonitoredDataPool</a>();
00042 
00043     <span class="comment">// Variable to hold maximum parameter identifier</span>
00044     <a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a> maxParId;
00045     maxParId = 11;
00046 
00047     <span class="comment">// Auxiliary variable to hold a data pool item identifier</span>
00048     <a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a> <span class="keywordtype">id</span>;
00049     <span class="keywordtype">id</span> = 0;
00050 
00051     <span class="comment">// Variable to hold the lowest illegal parameter id</span>
00052     <a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a> lowestIllegalParId;
00053     lowestIllegalParId = (<a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a>)3;
00054 
00055     <span class="comment">// Verify correctness of class ID</span>
00056     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classCC__RootObject.html#a3">getClassId</a>() != ID_SAMPLEMONITOREDDATAPOOL)
00057     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong class ID"</span>);
00058             <span class="keywordflow">return</span>;
00059     }
00060 
00061     <span class="comment">// Check default value of validity status.</span>
00062     
00063     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a8">isValid</a>(1) )
00064     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong default validity status on data item 1"</span>);
00065             <span class="keywordflow">return</span>;
00066     }
00067     
00068     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a8">isValid</a>(2) )
00069     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong default validity status on data item 2"</span>);
00070             <span class="keywordflow">return</span>;
00071     }
00072     
00073     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a8">isValid</a>(4) )
00074     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong default validity status on data item 4"</span>);
00075             <span class="keywordflow">return</span>;
00076     }
00077     
00078     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a8">isValid</a>(5) )
00079     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong default validity status on data item 5"</span>);
00080             <span class="keywordflow">return</span>;
00081     }
00082     
00083     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a8">isValid</a>(7) )
00084     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong default validity status on data item 7"</span>);
00085             <span class="keywordflow">return</span>;
00086     }
00087     
00088     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a8">isValid</a>(8) )
00089     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong default validity status on data item 8"</span>);
00090             <span class="keywordflow">return</span>;
00091     }
00092     
00093     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a8">isValid</a>(10) )
00094     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong default validity status on data item 10"</span>);
00095             <span class="keywordflow">return</span>;
00096     }
00097     
00098     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a8">isValid</a>(11) )
00099     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong default validity status on data item 11"</span>);
00100             <span class="keywordflow">return</span>;
00101     }
00102     
00103     <span class="comment">// Check that the data pool is not yet configured</span>
00104     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a16">isObjectConfigured</a>() != <a class="code" href="Constants_8h.html#a1">NOT_CONFIGURED</a> )
00105     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Incorrect configuration status at creation"</span>);
00106             <span class="keywordflow">return</span>;
00107     }
00108 
00109     <span class="comment">// Load monitoring profiles and check correctness of load operations</span>
00110     <a class="code" href="classDC__NullProfile.html">DC_NullProfile</a>* pNP = <span class="keyword">new</span> <a class="code" href="classDC__NullProfile.html">DC_NullProfile</a>();  
00111     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a11">setMonitoringProfile</a>(1,pNP);
00112     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a10">getMonitoringProfile</a>(1)!=pNP)
00113     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back monitoring profile"</span>);
00114         <span class="keywordflow">return</span>;
00115     }
00116     
00117     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a11">setMonitoringProfile</a>(2,pNP);
00118     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a10">getMonitoringProfile</a>(2)!=pNP)
00119     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back monitoring profile"</span>);
00120         <span class="keywordflow">return</span>;
00121     }
00122     
00123     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a11">setMonitoringProfile</a>(4,pNP);
00124     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a10">getMonitoringProfile</a>(4)!=pNP)
00125     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back monitoring profile"</span>);
00126         <span class="keywordflow">return</span>;
00127     }
00128     
00129     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a11">setMonitoringProfile</a>(5,pNP);
00130     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a10">getMonitoringProfile</a>(5)!=pNP)
00131     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back monitoring profile"</span>);
00132         <span class="keywordflow">return</span>;
00133     }
00134     
00135     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a11">setMonitoringProfile</a>(7,pNP);
00136     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a10">getMonitoringProfile</a>(7)!=pNP)
00137     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back monitoring profile"</span>);
00138         <span class="keywordflow">return</span>;
00139     }
00140     
00141     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a11">setMonitoringProfile</a>(8,pNP);
00142     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a10">getMonitoringProfile</a>(8)!=pNP)
00143     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back monitoring profile"</span>);
00144         <span class="keywordflow">return</span>;
00145     }
00146     
00147     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a11">setMonitoringProfile</a>(10,pNP);
00148     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a10">getMonitoringProfile</a>(10)!=pNP)
00149     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back monitoring profile"</span>);
00150         <span class="keywordflow">return</span>;
00151     }
00152     
00153     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a11">setMonitoringProfile</a>(11,pNP);
00154     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a10">getMonitoringProfile</a>(11)!=pNP)
00155     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back monitoring profile"</span>);
00156         <span class="keywordflow">return</span>;
00157     }
00158     
00159     <span class="comment">// Check that the data pool is configured</span>
00160     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a16">isObjectConfigured</a>() != <a class="code" href="Constants_8h.html#a0">CONFIGURED</a> )
00161      {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Incorrect configuration status"</span>);
00162             <span class="keywordflow">return</span>;
00163       }
00164 
00165     <span class="comment">// Check data setting and getting services for the data pool item values</span>
00166     <span class="comment">// Do it for the real-value items first and then for the interger-valued items</span>
00167 
00168     <span class="keywordtype">id</span> = 2;
00169     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a1">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a17">TD_Float</a>)<span class="keywordtype">id</span>);
00170     <span class="keywordflow">if</span> ( fabs((<span class="keywordtype">float</span>)(pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a3">getFloatValue</a>(<span class="keywordtype">id</span>)-<span class="keywordtype">id</span>))&gt;FLT_EPSILON )
00171     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00172         <span class="keywordflow">return</span>;
00173     }
00174     <span class="keywordflow">if</span> ( fabs((<span class="keywordtype">float</span>)((*pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a5">getPointerFloatValue</a>(<span class="keywordtype">id</span>))-<span class="keywordtype">id</span>))&gt;FLT_EPSILON )
00175     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00176         <span class="keywordflow">return</span>;
00177     }
00178     <span class="keywordtype">id</span> = 5;
00179     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a1">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a17">TD_Float</a>)<span class="keywordtype">id</span>);
00180     <span class="keywordflow">if</span> ( fabs((<span class="keywordtype">float</span>)(pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a3">getFloatValue</a>(<span class="keywordtype">id</span>)-<span class="keywordtype">id</span>))&gt;FLT_EPSILON )
00181     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00182         <span class="keywordflow">return</span>;
00183     }
00184     <span class="keywordflow">if</span> ( fabs((<span class="keywordtype">float</span>)((*pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a5">getPointerFloatValue</a>(<span class="keywordtype">id</span>))-<span class="keywordtype">id</span>))&gt;FLT_EPSILON )
00185     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00186         <span class="keywordflow">return</span>;
00187     }
00188     <span class="keywordtype">id</span> = 8;
00189     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a1">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a17">TD_Float</a>)<span class="keywordtype">id</span>);
00190     <span class="keywordflow">if</span> ( fabs((<span class="keywordtype">float</span>)(pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a3">getFloatValue</a>(<span class="keywordtype">id</span>)-<span class="keywordtype">id</span>))&gt;FLT_EPSILON )
00191     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00192         <span class="keywordflow">return</span>;
00193     }
00194     <span class="keywordflow">if</span> ( fabs((<span class="keywordtype">float</span>)((*pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a5">getPointerFloatValue</a>(<span class="keywordtype">id</span>))-<span class="keywordtype">id</span>))&gt;FLT_EPSILON )
00195     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00196         <span class="keywordflow">return</span>;
00197     }
00198     <span class="keywordtype">id</span> = 11;
00199     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a1">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a17">TD_Float</a>)<span class="keywordtype">id</span>);
00200     <span class="keywordflow">if</span> ( fabs((<span class="keywordtype">float</span>)(pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a3">getFloatValue</a>(<span class="keywordtype">id</span>)-<span class="keywordtype">id</span>))&gt;FLT_EPSILON )
00201     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00202         <span class="keywordflow">return</span>;
00203     }
00204     <span class="keywordflow">if</span> ( fabs((<span class="keywordtype">float</span>)((*pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a5">getPointerFloatValue</a>(<span class="keywordtype">id</span>))-<span class="keywordtype">id</span>))&gt;FLT_EPSILON )
00205     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00206         <span class="keywordflow">return</span>;
00207     }
00208     <span class="keywordtype">id</span> = 1;
00209     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a1">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a18">TD_Integer</a>)<span class="keywordtype">id</span>);
00210     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a4">getIntegerValue</a>(<span class="keywordtype">id</span>)!=<span class="keywordtype">id</span> )
00211     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00212         <span class="keywordflow">return</span>;
00213     }
00214     <span class="keywordflow">if</span> ( (*pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a6">getPointerIntegerValue</a>(<span class="keywordtype">id</span>))!=<span class="keywordtype">id</span> )
00215     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00216         <span class="keywordflow">return</span>;
00217     }
00218     <span class="keywordtype">id</span> = 4;
00219     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a1">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a18">TD_Integer</a>)<span class="keywordtype">id</span>);
00220     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a4">getIntegerValue</a>(<span class="keywordtype">id</span>)!=<span class="keywordtype">id</span> )
00221     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00222         <span class="keywordflow">return</span>;
00223     }
00224     <span class="keywordflow">if</span> ( (*pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a6">getPointerIntegerValue</a>(<span class="keywordtype">id</span>))!=<span class="keywordtype">id</span> )
00225     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00226         <span class="keywordflow">return</span>;
00227     }
00228     <span class="keywordtype">id</span> = 7;
00229     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a1">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a18">TD_Integer</a>)<span class="keywordtype">id</span>);
00230     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a4">getIntegerValue</a>(<span class="keywordtype">id</span>)!=<span class="keywordtype">id</span> )
00231     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00232         <span class="keywordflow">return</span>;
00233     }
00234     <span class="keywordflow">if</span> ( (*pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a6">getPointerIntegerValue</a>(<span class="keywordtype">id</span>))!=<span class="keywordtype">id</span> )
00235     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00236         <span class="keywordflow">return</span>;
00237     }
00238     <span class="keywordtype">id</span> = 10;
00239     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a1">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a18">TD_Integer</a>)<span class="keywordtype">id</span>);
00240     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a4">getIntegerValue</a>(<span class="keywordtype">id</span>)!=<span class="keywordtype">id</span> )
00241     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00242         <span class="keywordflow">return</span>;
00243     }
00244     <span class="keywordflow">if</span> ( (*pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a6">getPointerIntegerValue</a>(<span class="keywordtype">id</span>))!=<span class="keywordtype">id</span> )
00245     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00246         <span class="keywordflow">return</span>;
00247     }
00248     <span class="comment">// Check the setting/getting of the validity status</span>
00249     <span class="keywordtype">id</span> = 1;
00250     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a9">setValidityStatus</a>(<span class="keywordtype">id</span>,<span class="keyword">false</span>);
00251     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a8">isValid</a>(<span class="keywordtype">id</span>) )
00252     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong validity status"</span>);
00253            <span class="keywordflow">return</span>;
00254     }
00255 
00256     <span class="comment">// Check illegal attempt to set the validity status</span>
00257     <span class="keywordflow">if</span> (<a class="code" href="classTestCase.html#b1">isNonNominalCheckAllowed</a>()) {
00258         pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a9">setValidityStatus</a>(11+1,<span class="keyword">false</span>);
00259         <span class="keywordflow">if</span> ( !verifyLatestEvent(nEvt+1,EVT_ILLEGAL_DP_ACCESS) )
00260             <span class="keywordflow">return</span>;
00261         nEvt = nEvt+1;
00262     }
00263 
00264     <span class="comment">// Reset the data pool and check that all items are valid</span>
00265     <span class="keywordtype">id</span> = 1;
00266     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a9">setValidityStatus</a>(<span class="keywordtype">id</span>,<span class="keyword">false</span>);
00267     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a15">reset</a>();
00268     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a8">isValid</a>(<span class="keywordtype">id</span>) )
00269     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Reset failure"</span>);
00270            <span class="keywordflow">return</span>;
00271     }
00272 
00273 
00274     <span class="comment">// Check the back-up value mechanism  (for an integer-valued data pool item)</span>
00275     <span class="keywordtype">id</span> = 1;
00276     <a class="code" href="BasicTypes_8h.html#a18">TD_Integer</a> oldValue = pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a4">getIntegerValue</a>(<span class="keywordtype">id</span>);
00277     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a9">setValidityStatus</a>(<span class="keywordtype">id</span>,<span class="keyword">false</span>);
00278     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a1">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a18">TD_Integer</a>)(oldValue+1));
00279     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a4">getIntegerValue</a>(<span class="keywordtype">id</span>)!=oldValue )
00280     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Back-up value failure"</span>);
00281             <span class="keywordflow">return</span>;
00282     }
00283     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a7">getDataItem</a>(<span class="keywordtype">id</span>)-&gt;<a class="code" href="classDC__DataItem.html#a4">getIntegerValue</a>()!=oldValue )
00284     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Back-up value failure"</span>);
00285         <span class="keywordflow">return</span>;
00286     }
00287     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a9">setValidityStatus</a>(<span class="keywordtype">id</span>,<span class="keyword">true</span>);
00288     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a1">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a18">TD_Integer</a>)(oldValue+1));
00289     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a4">getIntegerValue</a>(<span class="keywordtype">id</span>)!=(oldValue+1) )
00290     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Back-up value failure"</span>);
00291            <span class="keywordflow">return</span>;
00292     }
00293     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a7">getDataItem</a>(<span class="keywordtype">id</span>)-&gt;<a class="code" href="classDC__DataItem.html#a4">getIntegerValue</a>()!=(oldValue+1) )
00294     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Back-up value failure"</span>);
00295            <span class="keywordflow">return</span>;
00296     }
00297 
00298     <span class="comment">// Check the back-up value mechanism  (for a real-valued data pool item)</span>
00299     <span class="keywordtype">id</span> = 2;
00300     <a class="code" href="BasicTypes_8h.html#a17">TD_Float</a> fOldValue = pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a3">getFloatValue</a>(<span class="keywordtype">id</span>);
00301     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a9">setValidityStatus</a>(<span class="keywordtype">id</span>,<span class="keyword">false</span>);
00302     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a1">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a17">TD_Float</a>)(fOldValue+1.0));
00303     <span class="keywordflow">if</span> ( fabs( (<span class="keywordtype">float</span>)(pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a3">getFloatValue</a>(<span class="keywordtype">id</span>)-fOldValue) )&gt;FLT_EPSILON )
00304     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Back-up value failure"</span>);
00305            <span class="keywordflow">return</span>;
00306     }
00307     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a9">setValidityStatus</a>(<span class="keywordtype">id</span>,<span class="keyword">true</span>);
00308     pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a1">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a17">TD_Float</a>)(fOldValue+1.0));
00309     <span class="keywordflow">if</span> ( fabs( (<span class="keywordtype">float</span>)(pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a3">getFloatValue</a>(<span class="keywordtype">id</span>)-(fOldValue+1.0)) )&gt;FLT_EPSILON )
00310     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Back-up value failure"</span>);
00311            <span class="keywordflow">return</span>;
00312     }
00313 
00314     <span class="comment">// Check the iteration service</span>
00315     <a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a> counter = 0;
00316     <span class="keywordflow">for</span> (<a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a> i=pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a12">firstIdentifier</a>(); !pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a14">isLastIdentifier</a>(); i=pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a13">nextIdentifier</a>()) {
00317         counter++;
00318         pDP-&gt;<a class="code" href="classDC__SampleMonitoredDataPool.html#a9">setValidityStatus</a>(i,<span class="keyword">false</span>);        <span class="comment">// dummy call -- just to exercise data pool access</span>
00319     }
00320     <span class="keywordflow">if</span> ( counter!=numberOfPar )
00321     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Error in data pool iteration"</span>);
00322         <span class="keywordflow">return</span>;
00323     }
00324 
00325    setTestResult(<a class="code" href="TestConstants_8h.html#a0">TEST_SUCCESS</a>,<span class="stringliteral">"Test Successful"</span>);
00326    <span class="keywordflow">return</span>;
00327 }
</div></pre><center>
<b>Copyright 2003 <a href="http://www.pnp-software.com/" target="_parent">P&P Software GmbH</a> - All Rights Reserved</b>
</center>
