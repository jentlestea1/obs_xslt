<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OBS Framework: DC_MatlabCopyPID class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>DC_MatlabCopyPID Class Reference</h1><code>#include &lt;<a class="el" href="DC__MatlabCopyPID_8h-source.html">DC_MatlabCopyPID.h</a>&gt;</code>
<p>
<p>Inheritance diagram for DC_MatlabCopyPID:
<p><center><img src="classDC__MatlabCopyPID.png" usemap="#DC_MatlabCopyPID_map" border="0" alt=""></center>
<map name="DC_MatlabCopyPID_map">
<area href="classCopyControlBlock.html" alt="CopyControlBlock" shape="rect" coords="0,112,125,136">
<area href="classControlBlock.html" alt="ControlBlock" shape="rect" coords="0,56,125,80">
<area href="classCC__RootObject.html" alt="CC_RootObject" shape="rect" coords="0,0,125,24">
</map>
<a href="classDC__MatlabCopyPID-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Matlab Wrapper for a PID Control Block. 
<p>
This class assumes that the Real-Time Workshop code generation tool with which the wrapped code was generated using the "RTW Embedded Coder" target file. The storage class of all inputs, outputs and parameters is assumed to have been set to "ExportedGlobal". <p>
This class was tested only with code generated by Real-Time Workshop Embedded Coder version 3.0. <p>
The Matlab-generated code is not part of the OBS Framework. It must be provided by the user. This class assumes that the code is placed in directory: "../MatlabAutocode" where the path is relative to the directory where this class is stored. <p>
Since not all users will be able to provide this code, a compiler switch is provided to disable use of the matlab-generated code. If the macro HAVE_SIMULINK is not defined, then the class behaves like a dummy class that implements a trivial transfer function. <p>
The wrapper is implemented as a form of <em>control block</em>. The control block has 1 inputs and 1 outputs. The control block has the following parameters: <ul>
<li>
KP: The proportional gain </li>
<li>
KI: The integral gain </li>
<li>
KD: The derivative gain </li>
</ul>
The model "step" and "initialization" functions are: <code>PID_step</code> and <code>PID_init</code>. The model "terminate" function is never invoked (OBS classes are never destroyed). The copy link mechanism is used to link the Matlab inputs and outputs to their external inputs and outputs. <p>
This class should be used as a singleton because the matlab-generated code is not re-entrant. <dl compact><dt><b>See also:</b></dt><dd>HAVE_SIMULINK </dd></dl>
<dl compact><dt><b>Author:</b></dt><dd>R. Totaro (code template) / A. Pasetti (code generator) </dd></dl>
<dl compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>

<p>

<p>
Definition at line <a class="el" href="DC__MatlabCopyPID_8h-source.html#l00069">69</a> of file <a class="el" href="DC__MatlabCopyPID_8h-source.html">DC_MatlabCopyPID.h</a>.<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDC__MatlabCopyPID.html#a0">DC_MatlabCopyPID</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configure the PID control block.  <a href="#a0"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="a1" doxytag="DC_MatlabCopyPID::reset" ></a>
virtual void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDC__MatlabCopyPID.html#a1">reset</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reset the control block by invoking the matlab-generated initialize function. <br><br></td></tr>
<tr><td colspan=2><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>virtual void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDC__MatlabCopyPID.html#b0">propagateState</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implement the state propagation function.  <a href="#b0"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>virtual void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDC__MatlabCopyPID.html#b1">updateOutput</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implement the output update function.  <a href="#b1"></a><br><br></td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="DC_MatlabCopyPID::DC_MatlabCopyPID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> DC_MatlabCopyPID::DC_MatlabCopyPID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Configure the PID control block. 
<p>
The control block is configured to have one input, one outputs, three parameters. The three parameters represent the proportional, integral and derivative gain. The number of states is set to zero because the state is maintained internally to the Simulink-generated code. The Simulink model is initialized by calling the <code>reset</code> method. The class identifier is set. A pseudo-code implementation of this method therefore is:&lt;PRE&gt; . . . // set up internal data structures to link to matlab code . . . // set class identifier <a class="el" href="classControlBlock.html#b2">setNumberOfStates(0)</a>; <a class="el" href="classCopyControlBlock.html#b0">setNumberOfInputs(1)</a>; <a class="el" href="classCopyControlBlock.html#b1">setNumberOfOutputs(1)</a>; <a class="el" href="classControlBlock.html#b3">setNumberOfParameters(3)</a>; <a class="el" href="classDC__MatlabCopyPID.html#a1">reset()</a>;  Note that the number of states is set to zero because the matlab code already provides a data structure to save the propagation state. <p>
This class should only be instantiated once. 
<p>
Definition at line <a class="el" href="DC__MatlabCopyPID_8cpp-source.html#l00021">21</a> of file <a class="el" href="DC__MatlabCopyPID_8cpp-source.html">DC_MatlabCopyPID.cpp</a>.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b0" doxytag="DC_MatlabCopyPID::propagateState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DC_MatlabCopyPID::propagateState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implement the state propagation function. 
<p>
State propagation is performed internally to the matlab-generated code. This method therefore performs only the following two housekeeping tasks:&lt;ul&gt; Copy the values of the parameters from the buffer maintained by the control block class into the parameter buffer maintained by the Matlab code Load the values of the inputs into the input buffer maintained by the Matlab code  <dl compact><dt><b>See also:</b></dt><dd>ControlBlockFloatDbPar#propagate </dd></dl>

<p>
Implements <a class="el" href="classControlBlock.html#b4">ControlBlock</a>.
<p>
Definition at line <a class="el" href="DC__MatlabCopyPID_8cpp-source.html#l00057">57</a> of file <a class="el" href="DC__MatlabCopyPID_8cpp-source.html">DC_MatlabCopyPID.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="DC_MatlabCopyPID::updateOutput" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DC_MatlabCopyPID::updateOutput           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implement the output update function. 
<p>
This method performs the following two tasks:&lt;ul&gt; Call the matlab-generated step function Write the values of the outputs computed by the matlab-generated code to the control block outputs  <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classControlBlock.html#a9">ControlBlock::propagate</a> </dd></dl>

<p>
Implements <a class="el" href="classControlBlock.html#b5">ControlBlock</a>.
<p>
Definition at line <a class="el" href="DC__MatlabCopyPID_8cpp-source.html#l00067">67</a> of file <a class="el" href="DC__MatlabCopyPID_8cpp-source.html">DC_MatlabCopyPID.cpp</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="DC__MatlabCopyPID_8h-source.html">DC_MatlabCopyPID.h</a><li><a class="el" href="DC__MatlabCopyPID_8cpp-source.html">DC_MatlabCopyPID.cpp</a></ul>
<center>
<b>Copyright 2003 <a href="http://www.pnp-software.com/" target="_parent">P&P Software GmbH</a> - All Rights Reserved</b>
</center>
