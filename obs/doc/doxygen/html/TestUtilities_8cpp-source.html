<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OBS Framework: TestUtilities.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>TestUtilities.cpp</h1><pre class="fragment"><div>00001 <span class="comment">//</span>
00002 <span class="comment">// Copyright 2004 P&amp;P Software GmbH - All Rights Reserved</span>
00003 <span class="comment">//</span>
00004 <span class="comment">// TestUtilities.cpp</span>
00005 <span class="comment">//</span>
00006 <span class="comment">// Version      1.0</span>
00007 <span class="comment">// Date         13.09.02</span>
00008 <span class="comment">// Author       A. Pasetti (P&amp;P Software)</span>
00009 
00010 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00011 <span class="preprocessor">#include &lt;time.h&gt;</span>
00012 <span class="preprocessor">#include "../GeneralInclude/TestCompilerSwitches.h"</span>
00013 <span class="preprocessor">#include "../GeneralInclude/TestConstants.h"</span>
00014 <span class="preprocessor">#include "../Utilities/TestUtilities.h"</span>
00015 
00016 <span class="keywordtype">void</span> printRegressionTestHeader(FILE* outFile) {
00017 <span class="preprocessor">#ifdef MS_HOST</span>
00018 <span class="preprocessor"></span>     time_t ltime;
00019      time( &amp;ltime );
00020      fprintf(outFile,<span class="stringliteral">"&lt;html&gt;&lt;head&gt;\n"</span>);
00021      fprintf(outFile,<span class="stringliteral">"&lt;title&gt;OBS Framework - Regression Test Report&lt;/title&gt;\n"</span>);
00022      fprintf(outFile,<span class="stringliteral">"&lt;/head&gt;&lt;body  bgcolor=\"#FFFF99\" link=\"#3333FF\"&gt;\n"</span>);
00023      fprintf(outFile,<span class="stringliteral">"&lt;center&gt;&lt;h1&gt;Regression Test Report&lt;/h1&gt;&lt;/center&gt;\n"</span>);
00024      fprintf(outFile,<span class="stringliteral">"&lt;center&gt;&lt;h4&gt;&lt;i&gt;Test Run Performed on %s&lt;/i&gt;&lt;/h4&gt;&lt;/center&gt;\n"</span>,
00025                     ctime( &amp;ltime ));
00026      fprintf(outFile,<span class="stringliteral">"This report was automatically generated by the regression test program of\n"</span>);
00027      fprintf(outFile,<span class="stringliteral">"the OBS Framework. The regression test program executes all the test cases\n"</span>);
00028      fprintf(outFile,<span class="stringliteral">"defined for the OBS Framework. The test cases are executed in sequence.\n"</span>);
00029      fprintf(outFile,<span class="stringliteral">"Each test cases tests some or all the functionalities of one \n"</span>);
00030      fprintf(outFile,<span class="stringliteral">"framework component. The tests are performed at component-level only.\n"</span>);
00031      fprintf(outFile,<span class="stringliteral">"A test case can have two possible outcomes: 'test succeeded' or 'test failed'.\n"</span>);
00032      fprintf(outFile,<span class="stringliteral">"The test case outcome can be accompanied by an explanatory message.\n"</span>);
00033      fprintf(outFile,<span class="stringliteral">"The table below reports the outcome of the test case performed in a \n"</span>);
00034      fprintf(outFile,<span class="stringliteral">"regression test run. The links in the table point to the files documenting the individual test cases. \n"</span>);
00035      fprintf(outFile,<span class="stringliteral">"The links are active only if this file\n"</span>);
00036      fprintf(outFile,<span class="stringliteral">"is placed in the directory containing the HTML architectural documentation of \n"</span>);
00037      fprintf(outFile,<span class="stringliteral">"the OBS Framework.\n"</span>);
00038      fprintf(outFile,<span class="stringliteral">"There should be one documentation file for each test case. The links assume its \n"</span>);
00039      fprintf(outFile,<span class="stringliteral">"name to be: 'TEST_FILE_NAME_1'+'test name'+'TEST_FILE_NAME_2'+'.html' where \n"</span>);
00040      fprintf(outFile,<span class="stringliteral">"'TEST_FILE_NAME_1' and 'TEST_FILE_NAME_2' are string constants defined in\n"</span>);
00041      fprintf(outFile,<span class="stringliteral">"the 'TestConstants.h' include file.\n"</span>);
00042      fprintf(outFile,<span class="stringliteral">"&lt;p&gt;\n"</span>);
00043      fprintf(outFile,<span class="stringliteral">"&lt;p&gt;\n"</span>);
00044      fprintf(outFile,<span class="stringliteral">"&lt;table BORDER=1 ALIGN=\"center\" CELLPADDING=5%&gt;\n"</span>);
00045      fprintf(outFile,<span class="stringliteral">"&lt;tr&gt;&lt;th&gt;Test Name&lt;/th&gt;\n"</span>);
00046      fprintf(outFile,<span class="stringliteral">"&lt;th&gt;Test Outcome&lt;/th&gt;&lt;/tr&gt;\n"</span>);
00047 <span class="preprocessor">#else</span>
00048 <span class="preprocessor"></span>        printf(<span class="stringliteral">"Regression Test Report"</span>);
00049 <span class="preprocessor">#endif</span>
00050 <span class="preprocessor"></span>}
00051 
00052 <span class="keywordtype">void</span> printRegressionTestTail(FILE* outFile) {
00053 <span class="preprocessor">#ifdef MS_HOST</span>
00054 <span class="preprocessor"></span>     fprintf(outFile,<span class="stringliteral">"&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;\n"</span>);
00055 <span class="preprocessor">#endif</span>
00056 <span class="preprocessor"></span>}
00057 
00058 <span class="keywordtype">void</span> printTestSuccess(FILE* outFile, <span class="keywordtype">char</span>* testName, <span class="keywordtype">char</span>* testMsg) {
00059 <span class="preprocessor">#ifdef MS_HOST</span>
00060 <span class="preprocessor"></span>        fprintf(outFile,<span class="stringliteral">"&lt;tr&gt;&lt;td&gt;&lt;a href=\"%s%s%s.html\"&gt;%s&lt;/a&gt;&lt;/td&gt;\n"</span>,
00061                TEST_FILE_NAME_1,doubleUnderscore(outFile,testName),TEST_FILE_NAME_2,testName);
00062         fprintf(outFile,<span class="stringliteral">"&lt;td&gt;%s&lt;/td&gt;&lt;/tr&gt;\n"</span>,testMsg);
00063 <span class="preprocessor">#else</span>
00064 <span class="preprocessor"></span>        printf(<span class="stringliteral">"Test %s executed successfully. %s\n"</span>,testName,testMsg);
00065 <span class="preprocessor">#endif</span>
00066 <span class="preprocessor"></span>}
00067 
00068 <span class="keywordtype">void</span> printTestFailed(FILE* outFile, <span class="keywordtype">char</span>* testName, <span class="keywordtype">char</span>* testMsg) {
00069 <span class="preprocessor">#ifdef MS_HOST</span>
00070 <span class="preprocessor"></span>        fprintf(outFile,<span class="stringliteral">"&lt;tr&gt;&lt;td&gt;&lt;a href=\"%s%s%s.html\"&gt;%s&lt;/a&gt;&lt;/td&gt;\n"</span>,
00071                TEST_FILE_NAME_1,doubleUnderscore(outFile,testName),TEST_FILE_NAME_2,testName);
00072         fprintf(outFile,<span class="stringliteral">"&lt;td&gt;&lt;b&gt;%s&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;\n"</span>,testMsg);
00073 <span class="preprocessor">#else</span>
00074 <span class="preprocessor"></span>        printf(<span class="stringliteral">"Test %s failed. %s\n"</span>,testName,testMsg);
00075 <span class="preprocessor">#endif</span>
00076 <span class="preprocessor"></span>}
00077 
00078 <span class="keywordtype">void</span> printErrorMsg(FILE* outFile, <span class="keywordtype">char</span>* testName, <span class="keywordtype">char</span>* testMsg) {
00079 <span class="preprocessor">#ifdef MS_HOST</span>
00080 <span class="preprocessor"></span>        fprintf(outFile,<span class="stringliteral">"&lt;tr&gt;&lt;td&gt;%s&lt;/td&gt;\n"</span>,testName);
00081         fprintf(outFile,<span class="stringliteral">"&lt;td&gt;&lt;b&gt;%s&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;\n"</span>,testMsg);
00082 <span class="preprocessor">#else</span>
00083 <span class="preprocessor"></span>        printf(<span class="stringliteral">"Test %s failed. %s\n"</span>,testName,testMsg);
00084 <span class="preprocessor">#endif</span>
00085 <span class="preprocessor"></span>}
00086 
00087 <span class="keywordtype">char</span>* doubleUnderscore(FILE* outFile, <span class="keywordtype">char</span>* testName) {
00088     <span class="keywordtype">int</span> i = 0;
00089     <span class="keywordtype">int</span> j = 0;
00090     <span class="keywordflow">while</span> ( (testName[j]!=<span class="charliteral">'\0'</span>) &amp;&amp; (i&lt;(<a class="code" href="TestConstants_8h.html#a12">MAX_TEST_FILE_NAME_LENGTH</a>-1)) ) {
00091         charBuffer[i] = testName[j];
00092         <span class="keywordflow">if</span> (testName[j]==<span class="charliteral">'_'</span>) {
00093             i++;
00094             charBuffer[i] = <span class="charliteral">'_'</span>;
00095         }
00096         i++;
00097         j++;
00098     }
00099     <span class="keywordflow">if</span> (testName[j]!=<span class="charliteral">'\0'</span>) {
00100        printErrorMsg(outFile,testName,<span class="stringliteral">"Test case name is too long"</span>);
00101     }
00102     charBuffer[i]=<span class="charliteral">'\0'</span>;
00103     <span class="keywordflow">return</span> charBuffer;
00104 }
00105 
</div></pre><center>
<b>Copyright 2003 <a href="http://www.pnp-software.com/" target="_parent">P&P Software GmbH</a> - All Rights Reserved</b>
</center>
