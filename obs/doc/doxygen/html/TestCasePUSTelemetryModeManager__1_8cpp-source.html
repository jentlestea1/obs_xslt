<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OBS Framework: TestCasePUSTelemetryModeManager_1.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>TestCasePUSTelemetryModeManager_1.cpp</h1><pre class="fragment"><div>00001 <span class="comment">//</span>
00002 <span class="comment">// Copyright 2004 P&amp;P Software GmbH - All Rights Reserved</span>
00003 <span class="comment">//</span>
00004 <span class="comment">// TestCasePUSTelemetryModeManager_1.cpp</span>
00005 <span class="comment">//</span>
00006 <span class="comment">// Version      1.0</span>
00007 <span class="comment">// Date         04.01.04</span>
00008 <span class="comment">// Author       A. Pasetti (P&amp;P Software)</span>
00009 
00010 <span class="preprocessor">#include "../GeneralInclude/CompilerSwitches.h"</span>
00011 <span class="preprocessor">#include "../GeneralInclude/ClassId.h"</span>
00012 <span class="preprocessor">#include "../GeneralInclude/BasicTypes.h"</span>
00013 <span class="preprocessor">#include "../GeneralInclude/Constants.h"</span>
00014 <span class="preprocessor">#include "../Telemetry/DC_PUSTelemetryModeManager.h"</span>
00015 <span class="preprocessor">#include "../Telemetry/DC_PUSDataReportingPacket.h"</span>
00016 <span class="preprocessor">#include "../Telemetry/CC_TelemetryPacketFactory.h"</span>
00017 <span class="preprocessor">#include "../Utilities/TestCaseWithFactories.h"</span>
00018 <span class="preprocessor">#include "TestCasePUSTelemetryModeManager_1.h"</span>
00019 
00020 <span class="preprocessor">#include &lt;string.h&gt;</span>
00021 
<a name="l00022"></a><a class="code" href="classTestCasePUSTelemetryModeManager__1.html#a0">00022</a> <a class="code" href="classTestCasePUSTelemetryModeManager__1.html#a0">TestCasePUSTelemetryModeManager_1::TestCasePUSTelemetryModeManager_1</a>(<span class="keywordtype">void</span>) :
00023         <a class="code" href="classTestCasePUSFull.html">TestCasePUSFull</a>(ID_PUSTELEMETRYMODEMANAGER*10+1,"<a class="code" href="classTestCasePUSTelemetryModeManager__1.html">TestCasePUSTelemetryModeManager_1</a>") {
00024                 <span class="keywordflow">return</span>;
00025 }
00026 
<a name="l00027"></a><a class="code" href="classTestCasePUSTelemetryModeManager__1.html#a1">00027</a> <span class="keywordtype">void</span> <a class="code" href="classTestCasePUSTelemetryModeManager__1.html#a1">TestCasePUSTelemetryModeManager_1::runTestCase</a>(<span class="keywordtype">void</span>) {
00028 
00029     <span class="comment">// Retrieve the packet factory</span>
00030     <a class="code" href="classCC__TelemetryPacketFactory.html">CC_TelemetryPacketFactory</a>* pFct = <a class="code" href="classCC__TelemetryPacketFactory.html#e0">CC_TelemetryPacketFactory::getInstance</a>();
00031 
00032     <span class="comment">// Allocate the two telemetry packets</span>
00033     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> defPacketSize = <a class="code" href="TestConstants_8h.html#a27">PUS_DRP_DEF_BUF_SIZE_SMALL</a>-2;
00034     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> valBufferSize = <a class="code" href="TestConstants_8h.html#a29">PUS_DRP_VAL_BUF_SIZE_SMALL</a>-2;
00035     <a class="code" href="classDC__PUSDataReportingPacket.html">DC_PUSDataReportingPacket</a>* pTMP_a = pFct-&gt;<a class="code" href="classCC__TelemetryPacketFactory.html#a9">allocatePUSDataReportingPacket</a>(defPacketSize,valBufferSize,0);
00036     <a class="code" href="classDC__PUSDataReportingPacket.html">DC_PUSDataReportingPacket</a>* pTMP_b = pFct-&gt;<a class="code" href="classCC__TelemetryPacketFactory.html#a9">allocatePUSDataReportingPacket</a>(defPacketSize,valBufferSize,0);
00037 
00038     <span class="comment">// Construct the packet</span>
00039     <a class="code" href="BasicTypes_8h.html#a21">TD_SID</a> sid_a = 12;
00040     <a class="code" href="BasicTypes_8h.html#a21">TD_SID</a> sid_b = 13;
00041     <a class="code" href="BasicTypes_8h.html#a23">TD_PUSCollectionInterval</a> collectionInterval = 1;
00042     <a class="code" href="BasicTypes_8h.html#a24">TD_PUSNumberOfParameters</a> NPAR1 = 1;
00043     <a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a> par1 = 1;
00044 
00045     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* packet = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[defPacketSize];
00046     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> offset = 0;
00047     memcpy(packet+offset,&amp;sid_a,<span class="keyword">sizeof</span>(<a class="code" href="BasicTypes_8h.html#a21">TD_SID</a>));
00048     offset += <span class="keyword">sizeof</span>(<a class="code" href="BasicTypes_8h.html#a21">TD_SID</a>);
00049     memcpy(packet+offset,&amp;collectionInterval,<span class="keyword">sizeof</span>(<a class="code" href="BasicTypes_8h.html#a23">TD_PUSCollectionInterval</a>));
00050     offset += <span class="keyword">sizeof</span>(<a class="code" href="BasicTypes_8h.html#a23">TD_PUSCollectionInterval</a>);
00051     memcpy(packet+offset,&amp;NPAR1,<span class="keyword">sizeof</span>(<a class="code" href="BasicTypes_8h.html#a24">TD_PUSNumberOfParameters</a>));
00052     offset += <span class="keyword">sizeof</span>(<a class="code" href="BasicTypes_8h.html#a24">TD_PUSNumberOfParameters</a>);
00053     memcpy(packet+offset,&amp;par1,<span class="keyword">sizeof</span>(<a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a>));
00054     offset += <span class="keyword">sizeof</span>(<a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a>);
00055 
00056     <span class="comment">// Configure the two packets and check that they are configured</span>
00057     pTMP_a-&gt;<a class="code" href="classPUSTelemetryPacket.html#a2">setSubType</a>(<a class="code" href="Constants_8h.html#a70">PUS_ST_DATA_REP_PAR_HK_REP</a>);
00058     <span class="keywordflow">if</span> ( !pTMP_a-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a22">isObjectConfigured</a>() )
00059     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"Wrong configuration status"</span>);
00060         <span class="keywordflow">return</span>;
00061     }
00062     pTMP_b-&gt;<a class="code" href="classPUSTelemetryPacket.html#a2">setSubType</a>(<a class="code" href="Constants_8h.html#a70">PUS_ST_DATA_REP_PAR_HK_REP</a>);
00063     <span class="keywordflow">if</span> ( !pTMP_b-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a22">isObjectConfigured</a>() )
00064     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>,<span class="stringliteral">"Wrong configuration status"</span>);
00065         <span class="keywordflow">return</span>;
00066     }
00067 
00068     <span class="comment">// Load the packet definitions for the first TM packet</span>
00069     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> j=0; j&lt;offset; j++) 
00070         pTMP_a-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a7">setDefinitionBuffer</a>(j,packet[j]);
00071 
00072     <span class="comment">// Load the packet definitions for the second TM packet</span>
00073     memcpy(packet,&amp;sid_b,<span class="keyword">sizeof</span>(<a class="code" href="BasicTypes_8h.html#a21">TD_SID</a>));
00074     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> j=0; j&lt;offset; j++) 
00075         pTMP_b-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a7">setDefinitionBuffer</a>(j,packet[j]);
00076 
00077     <span class="comment">// Retrieve the mode manager</span>
00078     <a class="code" href="classDC__PUSTelemetryModeManager.html">DC_PUSTelemetryModeManager</a>* pMM = <a class="code" href="classTestCasePUSFull.html#a5">getTelemetryModeManager</a>();
00079 
00080     <span class="comment">// Check the value of the class identifier</span>
00081     <span class="keywordflow">if</span> ( pMM-&gt;<a class="code" href="classCC__RootObject.html#a3">getClassId</a>() != ID_PUSTELEMETRYMODEMANAGER )
00082     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong class identifier"</span>);
00083          <span class="keywordflow">return</span>;
00084     }
00085 
00086     <span class="comment">// Check that the number of packets is correct</span>
00087     <span class="keywordflow">if</span> ( pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a9">getMaxNumberOfPackets</a>()!=<a class="code" href="TestConstants_8h.html#a32">TM_MODE_MAN_MAX_N_PACKETS</a> )
00088     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong max number of TM packets"</span>);
00089          <span class="keywordflow">return</span>;
00090     }
00091 
00092     <span class="comment">// Terminate configuration of mode manager and check configuration status</span>
00093     pMM-&gt;<a class="code" href="classModeManager.html#a10">reset</a>();
00094     <span class="keywordflow">if</span> ( !pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a13">isObjectConfigured</a>() )
00095     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong configuration status"</span>);
00096          <span class="keywordflow">return</span>;
00097     }
00098     
00099     <span class="comment">// Load packets and check success</span>
00100     pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a3">loadPacket</a>(pTMP_a);
00101     pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a3">loadPacket</a>(pTMP_b);
00102     <span class="keywordflow">if</span> ( pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a6">getNumberOfPackets</a>()!=2 )
00103     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong number of packets"</span>);
00104          <span class="keywordflow">return</span>;
00105     }
00106 
00107     <span class="comment">// Load the packet SID_B till the mode manager is full</span>
00108     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j=2; j&lt;<a class="code" href="TestConstants_8h.html#a32">TM_MODE_MAN_MAX_N_PACKETS</a>; j++)
00109         pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a3">loadPacket</a>(pTMP_b);
00110 
00111     <span class="comment">// Check that mode manager is full</span>
00112     <span class="keywordflow">if</span> ( !pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a5">isFull</a>() )
00113     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong full status"</span>);
00114          <span class="keywordflow">return</span>;
00115     }
00116 
00117     <span class="comment">// Attempt to load a further packet and check failure</span>
00118     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nEvt = <a class="code" href="classTestCaseWithEvtCheck.html#b0">getNumberOfEvents</a>();
00119     pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a3">loadPacket</a>(pTMP_a);
00120     <span class="keywordflow">if</span> ( !verifyLatestEvent(nEvt+1,EVT_ILLEGAL_MM) )
00121         <span class="keywordflow">return</span>;
00122 
00123     <span class="comment">// Unload all SID_B packets but one</span>
00124     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j=2; j&lt;<a class="code" href="TestConstants_8h.html#a32">TM_MODE_MAN_MAX_N_PACKETS</a>; j++)
00125         pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a4">unloadPacket</a>(sid_b);
00126 
00127     <span class="comment">// Check iterator</span>
00128     <a class="code" href="classDC__PUSDataReportingPacket.html">DC_PUSDataReportingPacket</a>* pItem;
00129     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;
00130     <span class="keywordtype">bool</span> sid_a_found=<span class="keyword">false</span>;
00131     <span class="keywordtype">bool</span> sid_b_found=<span class="keyword">false</span>;
00132     <span class="keywordflow">for</span> (pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a10">first</a>(); !pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a12">isIterationFinished</a>(); pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a11">next</a>()) {
00133         pItem=(<a class="code" href="classDC__PUSDataReportingPacket.html">DC_PUSDataReportingPacket</a>*)pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a2">getIterationTelemetryPacket</a>();
00134         i++;
00135 
00136         <span class="keywordflow">if</span> ( pItem-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a6">getSID</a>()==pTMP_a-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a6">getSID</a>() &amp;&amp; !sid_a_found ) {
00137             sid_a_found = <span class="keyword">true</span>;
00138             <span class="keywordflow">continue</span>;
00139         }
00140 
00141         <span class="keywordflow">if</span> ( pItem-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a6">getSID</a>()==pTMP_b-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a6">getSID</a>() &amp;&amp; !sid_b_found ) {
00142             sid_b_found = <span class="keyword">true</span>;
00143             <span class="keywordflow">continue</span>;
00144         }
00145 
00146         setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong iteration number"</span>);
00147         <span class="keywordflow">return</span>;
00148     }
00149     <span class="keywordflow">if</span> (!sid_a_found || !sid_b_found || (i!=2) )
00150     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong iteration number"</span>);
00151          <span class="keywordflow">return</span>;
00152     }
00153     
00154     <span class="comment">// Check packet presence </span>
00155     <span class="keywordflow">if</span> ( !pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a7">isSIDLoaded</a>(pTMP_a-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a6">getSID</a>()) )
00156     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong presence check result"</span>);
00157          <span class="keywordflow">return</span>;
00158     }
00159     <span class="keywordflow">if</span> ( pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a7">isSIDLoaded</a>(pTMP_a-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a6">getSID</a>()+2) )
00160     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong presence check result"</span>);
00161          <span class="keywordflow">return</span>;
00162     }
00163 
00164     <span class="comment">// Unload packet and check success</span>
00165     pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a4">unloadPacket</a>(pTMP_b-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a6">getSID</a>());
00166     <span class="keywordflow">if</span> ( pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a6">getNumberOfPackets</a>()!=1 )
00167     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong number of packets"</span>);
00168          <span class="keywordflow">return</span>;
00169     }
00170     <span class="keywordflow">if</span> ( pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a5">isFull</a>() )
00171     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong full status"</span>);
00172          <span class="keywordflow">return</span>;
00173     }
00174 
00175     <span class="comment">// Attempt to unload non-existent packet and check failure</span>
00176     nEvt = <a class="code" href="classTestCaseWithEvtCheck.html#b0">getNumberOfEvents</a>();
00177     pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a4">unloadPacket</a>(sid_b+2);
00178     <span class="keywordflow">if</span> ( !verifyLatestEvent(nEvt+1,EVT_SID_NOT_FOUND) )
00179         <span class="keywordflow">return</span>;
00180       
00181     <span class="comment">// Check iterator</span>
00182     i = 0;
00183     sid_a_found=<span class="keyword">false</span>;
00184     <span class="keywordflow">for</span> (pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a10">first</a>(); !pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a12">isIterationFinished</a>(); pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a11">next</a>()) {
00185         pItem=(<a class="code" href="classDC__PUSDataReportingPacket.html">DC_PUSDataReportingPacket</a>*)pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a2">getIterationTelemetryPacket</a>();
00186         i++;
00187 
00188         <span class="keywordflow">if</span> ( pItem-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a6">getSID</a>()==pTMP_a-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a6">getSID</a>() &amp;&amp; !sid_a_found ) {
00189             sid_a_found = <span class="keyword">true</span>;
00190             <span class="keywordflow">continue</span>;
00191         }
00192 
00193         setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong iteration number"</span>);
00194         <span class="keywordflow">return</span>;
00195     }
00196     <span class="keywordflow">if</span> (!sid_a_found || (i!=1) )
00197     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong iteration number"</span>);
00198          <span class="keywordflow">return</span>;
00199     }
00200 
00201     <span class="comment">// Reload packet SID_B and unload packet SID_A and check success</span>
00202     pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a3">loadPacket</a>(pTMP_b);
00203     pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a4">unloadPacket</a>(pTMP_a-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a6">getSID</a>());
00204     <span class="keywordflow">if</span> ( pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a6">getNumberOfPackets</a>()!=1 )
00205     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong number of packets"</span>);
00206          <span class="keywordflow">return</span>;
00207     }
00208     <span class="keywordflow">if</span> ( pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a5">isFull</a>() )
00209     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong full status"</span>);
00210          <span class="keywordflow">return</span>;
00211     }
00212 
00213     <span class="comment">// Check iterator</span>
00214     i = 0;
00215     sid_b_found=<span class="keyword">false</span>;
00216     <span class="keywordflow">for</span> (pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a10">first</a>(); !pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a12">isIterationFinished</a>(); pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a11">next</a>()) {
00217         pItem=(<a class="code" href="classDC__PUSDataReportingPacket.html">DC_PUSDataReportingPacket</a>*)pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a2">getIterationTelemetryPacket</a>();
00218         i++;
00219 
00220         <span class="keywordflow">if</span> ( pItem-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a6">getSID</a>()==pTMP_b-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a6">getSID</a>() &amp;&amp; !sid_b_found ) {
00221             sid_b_found = <span class="keyword">true</span>;
00222             <span class="keywordflow">continue</span>;
00223         }
00224 
00225         setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong iteration number"</span>);
00226         <span class="keywordflow">return</span>;
00227     }
00228     <span class="keywordflow">if</span> (!sid_b_found || (i!=1) )
00229     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong iteration number"</span>);
00230          <span class="keywordflow">return</span>;
00231     }   
00232     
00233     <span class="comment">// Unload the last remaining packet and check success</span>
00234     pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a4">unloadPacket</a>(pTMP_b-&gt;<a class="code" href="classDC__PUSDataReportingPacket.html#a6">getSID</a>());
00235     <span class="keywordflow">if</span> ( pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a6">getNumberOfPackets</a>()!=0 )
00236     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong number of packets"</span>);
00237          <span class="keywordflow">return</span>;
00238     }
00239     <span class="keywordflow">if</span> ( pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a5">isFull</a>() )
00240     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong full status"</span>);
00241          <span class="keywordflow">return</span>;
00242     }
00243 
00244     <span class="comment">// Check iterator</span>
00245     <span class="keywordtype">bool</span> flag = <span class="keyword">false</span>;
00246     <span class="keywordflow">for</span> (pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a10">first</a>(); !pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a12">isIterationFinished</a>(); pMM-&gt;<a class="code" href="classDC__PUSTelemetryModeManager.html#a11">next</a>()) {
00247         flag = <span class="keyword">true</span>;
00248     }
00249     <span class="keywordflow">if</span> (flag)
00250     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong iteration number"</span>);
00251         <span class="keywordflow">return</span>;
00252     }
00253   
00254     setTestResult(<a class="code" href="TestConstants_8h.html#a0">TEST_SUCCESS</a>,<span class="stringliteral">"Test Successful"</span>);
00255     <span class="keywordflow">return</span>;
00256 }
</div></pre><center>
<b>Copyright 2003 <a href="http://www.pnp-software.com/" target="_parent">P&P Software GmbH</a> - All Rights Reserved</b>
</center>
