<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OBS Framework: TestCaseSampleFullDataPool_1.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>TestCaseSampleFullDataPool_1.cpp</h1><pre class="fragment"><div>00001   
00002 <span class="comment">//</span>
00003 <span class="comment">// Copyright 2003 P&amp;P Software GmbH - All Rights Reserved</span>
00004 <span class="comment">//</span>
00005 <span class="comment">// TestCaseSampleFullDataPool_1.h</span>
00006 <span class="comment">//</span>
00007 <span class="comment">// Version      1.0</span>
00008 <span class="comment">// Date         10.09.03 (Version 1.0)</span>
00009 <span class="comment">// Author       A. Pasetti (P&amp;P Software)</span>
00010 <span class="comment">//</span>
00011 
00012 <span class="preprocessor">#include "../GeneralInclude/CompilerSwitches.h"</span>
00013 <span class="preprocessor">#include "../GeneralInclude/ClassId.h"</span>
00014 <span class="preprocessor">#include "../GeneralInclude/Constants.h"</span>
00015 <span class="preprocessor">#include "../Data/DC_SampleFullDataPool.h"</span>
00016 <span class="preprocessor">#include "../Data/DC_DataItem.h"</span>
00017 <span class="preprocessor">#include "../System/DC_DummyObsClock.h"</span>
00018 <span class="preprocessor">#include "../FDIR/DC_NullProfile.h"</span>
00019 <span class="preprocessor">#include "../FDIR/DC_NullRecoveryAction.h"</span>
00020 <span class="preprocessor">#include "TestCaseSampleFullDataPool_1.h"</span>
00021 <span class="preprocessor">#include "../Utilities/TestCaseWithEvtCheck.h"</span>
00022 
00023 <span class="preprocessor">#include &lt;math.h&gt;</span>
00024 <span class="preprocessor">#include &lt;float.h&gt;</span>
00025 
<a name="l00026"></a><a class="code" href="classTestCaseSampleFullDataPool__1.html#a0">00026</a> <a class="code" href="classTestCaseSampleFullDataPool__1.html#a0">TestCaseSampleFullDataPool_1::TestCaseSampleFullDataPool_1</a>():
00027       <a class="code" href="classTestCaseWithEvtCheck.html">TestCaseWithEvtCheck</a>(ID_SAMPLEFULLDATAPOOL*10+1,"<a class="code" href="classTestCaseSampleFullDataPool__1.html">TestCaseSampleFullDataPool_1</a>") {
00028             <span class="keywordflow">return</span>;
00029 }
00030 
<a name="l00031"></a><a class="code" href="classTestCaseSampleFullDataPool__1.html#a1">00031</a> <span class="keywordtype">void</span> <a class="code" href="classTestCaseSampleFullDataPool__1.html#a1">TestCaseSampleFullDataPool_1::runTestCase</a>() {
00032 
00033     <span class="comment">// Variable to hold the number of events</span>
00034     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nEvt;
00035     nEvt = <a class="code" href="classTestCaseWithEvtCheck.html#b0">getNumberOfEvents</a>();
00036 
00037     <span class="comment">// Variable to hold number of parameters in the data pool</span>
00038     <a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a> numberOfPar = 8;
00039 
00040     <span class="comment">// Variable to hold first identifier of a real-value parameter</span>
00041     <a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a> firstRealId = 2;
00042 
00043     <span class="comment">// Variable to hold first identifier of an integer-valued parameter</span>
00044     <a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a> firstIntegerId = 1;
00045 
00046     <span class="comment">// Instantiate datapool</span>
00047     <a class="code" href="classDC__SampleFullDataPool.html">DC_SampleFullDataPool</a>* pDP = <span class="keyword">new</span> <a class="code" href="classDC__SampleFullDataPool.html">DC_SampleFullDataPool</a>();
00048 
00049     <span class="comment">// Variable to hold maximum parameter identifier</span>
00050     <a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a> maxParId;
00051     maxParId = 11;
00052 
00053     <span class="comment">// Auxiliary variable to hold a data pool item identifier</span>
00054     <a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a> <span class="keywordtype">id</span>;
00055     <span class="keywordtype">id</span> = 0;
00056 
00057     <span class="comment">// Variable to hold the lowest illegal parameter id</span>
00058     <a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a> lowestIllegalParId;
00059     lowestIllegalParId = (<a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a>)3;
00060 
00061     <span class="comment">// Verify correctness of class ID</span>
00062     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classCC__RootObject.html#a3">getClassId</a>() != ID_SAMPLEFULLDATAPOOL)
00063     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong class ID"</span>);
00064             <span class="keywordflow">return</span>;
00065     }
00066 
00067     <span class="comment">// Check default value of validity status.</span>
00068     
00069     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a11">isValid</a>(1) )
00070     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong default validity status on data item 1"</span>);
00071             <span class="keywordflow">return</span>;
00072     }
00073     
00074     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a11">isValid</a>(2) )
00075     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong default validity status on data item 2"</span>);
00076             <span class="keywordflow">return</span>;
00077     }
00078     
00079     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a11">isValid</a>(4) )
00080     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong default validity status on data item 4"</span>);
00081             <span class="keywordflow">return</span>;
00082     }
00083     
00084     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a11">isValid</a>(5) )
00085     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong default validity status on data item 5"</span>);
00086             <span class="keywordflow">return</span>;
00087     }
00088     
00089     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a11">isValid</a>(7) )
00090     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong default validity status on data item 7"</span>);
00091             <span class="keywordflow">return</span>;
00092     }
00093     
00094     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a11">isValid</a>(8) )
00095     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong default validity status on data item 8"</span>);
00096             <span class="keywordflow">return</span>;
00097     }
00098     
00099     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a11">isValid</a>(10) )
00100     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong default validity status on data item 10"</span>);
00101             <span class="keywordflow">return</span>;
00102     }
00103     
00104     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a11">isValid</a>(11) )
00105     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong default validity status on data item 11"</span>);
00106             <span class="keywordflow">return</span>;
00107     }
00108     
00109     <span class="comment">// Check that the data pool is not yet configured</span>
00110     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a23">isObjectConfigured</a>() != <a class="code" href="Constants_8h.html#a1">NOT_CONFIGURED</a> )
00111     {    setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Incorrect configuration status at creation"</span>);
00112           <span class="keywordflow">return</span>;
00113     }
00114 
00115     <span class="comment">// Create and load dummy clock</span>
00116     <a class="code" href="classDC__DummyObsClock.html">DC_DummyObsClock</a>* pClk = <span class="keyword">new</span> <a class="code" href="classDC__DummyObsClock.html">DC_DummyObsClock</a>();
00117     <a class="code" href="BasicTypes_8h.html#a2">TD_ObsTime</a> time = (<a class="code" href="BasicTypes_8h.html#a2">TD_ObsTime</a>)10;
00118     pClk-&gt;<a class="code" href="classDC__DummyObsClock.html#a5">setTime</a>(time);
00119     pClk-&gt;<a class="code" href="classDC__DummyObsClock.html#a6">setCycle</a>(0);
00120     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a1">setObsClock</a>(pClk);
00121     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a2">getObsClock</a>() != pClk )
00122     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Incorrect OBS Clock"</span>);
00123             <span class="keywordflow">return</span>;
00124     }
00125 
00126     <span class="comment">// Check that the data pool is not yet configured</span>
00127     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a23">isObjectConfigured</a>() != <a class="code" href="Constants_8h.html#a1">NOT_CONFIGURED</a> )
00128     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Incorrect configuration status at creation"</span>);
00129             <span class="keywordflow">return</span>;
00130     }
00131 
00132     <span class="comment">// Load monitoring profiles and check correctness of load operations</span>
00133     <a class="code" href="classDC__NullProfile.html">DC_NullProfile</a>* pNP = <span class="keyword">new</span> <a class="code" href="classDC__NullProfile.html">DC_NullProfile</a>();  
00134     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a14">setMonitoringProfile</a>(1,pNP);
00135     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a13">getMonitoringProfile</a>(1)!=pNP)
00136     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back monitoring profile"</span>);
00137         <span class="keywordflow">return</span>;
00138     }
00139     
00140     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a14">setMonitoringProfile</a>(2,pNP);
00141     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a13">getMonitoringProfile</a>(2)!=pNP)
00142     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back monitoring profile"</span>);
00143         <span class="keywordflow">return</span>;
00144     }
00145     
00146     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a14">setMonitoringProfile</a>(4,pNP);
00147     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a13">getMonitoringProfile</a>(4)!=pNP)
00148     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back monitoring profile"</span>);
00149         <span class="keywordflow">return</span>;
00150     }
00151     
00152     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a14">setMonitoringProfile</a>(5,pNP);
00153     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a13">getMonitoringProfile</a>(5)!=pNP)
00154     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back monitoring profile"</span>);
00155         <span class="keywordflow">return</span>;
00156     }
00157     
00158     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a14">setMonitoringProfile</a>(7,pNP);
00159     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a13">getMonitoringProfile</a>(7)!=pNP)
00160     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back monitoring profile"</span>);
00161         <span class="keywordflow">return</span>;
00162     }
00163     
00164     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a14">setMonitoringProfile</a>(8,pNP);
00165     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a13">getMonitoringProfile</a>(8)!=pNP)
00166     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back monitoring profile"</span>);
00167         <span class="keywordflow">return</span>;
00168     }
00169     
00170     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a14">setMonitoringProfile</a>(10,pNP);
00171     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a13">getMonitoringProfile</a>(10)!=pNP)
00172     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back monitoring profile"</span>);
00173         <span class="keywordflow">return</span>;
00174     }
00175     
00176     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a14">setMonitoringProfile</a>(11,pNP);
00177     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a13">getMonitoringProfile</a>(11)!=pNP)
00178     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back monitoring profile"</span>);
00179         <span class="keywordflow">return</span>;
00180     }
00181     
00182     <span class="comment">// Load recovery actions and check correctness of load operations</span>
00183     <a class="code" href="classDC__NullRecoveryAction.html">DC_NullRecoveryAction</a>* pRA = <span class="keyword">new</span> <a class="code" href="classDC__NullRecoveryAction.html">DC_NullRecoveryAction</a>();  
00184     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a16">setRecoveryAction</a>(1,pRA);
00185     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a15">getRecoveryAction</a>(1)!=pRA)
00186     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back recovery action"</span>);
00187         <span class="keywordflow">return</span>;
00188     }
00189     
00190     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a16">setRecoveryAction</a>(2,pRA);
00191     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a15">getRecoveryAction</a>(2)!=pRA)
00192     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back recovery action"</span>);
00193         <span class="keywordflow">return</span>;
00194     }
00195     
00196     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a16">setRecoveryAction</a>(4,pRA);
00197     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a15">getRecoveryAction</a>(4)!=pRA)
00198     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back recovery action"</span>);
00199         <span class="keywordflow">return</span>;
00200     }
00201     
00202     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a16">setRecoveryAction</a>(5,pRA);
00203     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a15">getRecoveryAction</a>(5)!=pRA)
00204     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back recovery action"</span>);
00205         <span class="keywordflow">return</span>;
00206     }
00207     
00208     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a16">setRecoveryAction</a>(7,pRA);
00209     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a15">getRecoveryAction</a>(7)!=pRA)
00210     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back recovery action"</span>);
00211         <span class="keywordflow">return</span>;
00212     }
00213     
00214     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a16">setRecoveryAction</a>(8,pRA);
00215     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a15">getRecoveryAction</a>(8)!=pRA)
00216     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back recovery action"</span>);
00217         <span class="keywordflow">return</span>;
00218     }
00219     
00220     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a16">setRecoveryAction</a>(10,pRA);
00221     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a15">getRecoveryAction</a>(10)!=pRA)
00222     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back recovery action"</span>);
00223         <span class="keywordflow">return</span>;
00224     }
00225     
00226     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a16">setRecoveryAction</a>(11,pRA);
00227     <span class="keywordflow">if</span> (pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a15">getRecoveryAction</a>(11)!=pRA)
00228     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back recovery action"</span>);
00229         <span class="keywordflow">return</span>;
00230     }
00231     
00232     <span class="comment">// Check that the data pool is configured</span>
00233     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a23">isObjectConfigured</a>() != <a class="code" href="Constants_8h.html#a0">CONFIGURED</a> )
00234      {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Incorrect configuration status"</span>);
00235             <span class="keywordflow">return</span>;
00236       }
00237 
00238     <span class="comment">// Check data setting and getting services for the data pool item values</span>
00239     <span class="comment">// Do it for the real-value items first and then for the interger-valued items</span>
00240 
00241     <span class="keywordtype">id</span> = 2;
00242     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a3">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a17">TD_Float</a>)<span class="keywordtype">id</span>);
00243     <span class="keywordflow">if</span> ( fabs((<span class="keywordtype">float</span>)(pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a5">getFloatValue</a>(<span class="keywordtype">id</span>)-<span class="keywordtype">id</span>))&gt;FLT_EPSILON )
00244     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00245         <span class="keywordflow">return</span>;
00246     }
00247     <span class="keywordflow">if</span> ( fabs((<span class="keywordtype">float</span>)((*pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a7">getPointerFloatValue</a>(<span class="keywordtype">id</span>))-<span class="keywordtype">id</span>))&gt;FLT_EPSILON )
00248     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00249         <span class="keywordflow">return</span>;
00250     }
00251     <span class="keywordtype">id</span> = 5;
00252     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a3">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a17">TD_Float</a>)<span class="keywordtype">id</span>);
00253     <span class="keywordflow">if</span> ( fabs((<span class="keywordtype">float</span>)(pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a5">getFloatValue</a>(<span class="keywordtype">id</span>)-<span class="keywordtype">id</span>))&gt;FLT_EPSILON )
00254     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00255         <span class="keywordflow">return</span>;
00256     }
00257     <span class="keywordflow">if</span> ( fabs((<span class="keywordtype">float</span>)((*pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a7">getPointerFloatValue</a>(<span class="keywordtype">id</span>))-<span class="keywordtype">id</span>))&gt;FLT_EPSILON )
00258     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00259         <span class="keywordflow">return</span>;
00260     }
00261     <span class="keywordtype">id</span> = 8;
00262     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a3">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a17">TD_Float</a>)<span class="keywordtype">id</span>);
00263     <span class="keywordflow">if</span> ( fabs((<span class="keywordtype">float</span>)(pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a5">getFloatValue</a>(<span class="keywordtype">id</span>)-<span class="keywordtype">id</span>))&gt;FLT_EPSILON )
00264     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00265         <span class="keywordflow">return</span>;
00266     }
00267     <span class="keywordflow">if</span> ( fabs((<span class="keywordtype">float</span>)((*pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a7">getPointerFloatValue</a>(<span class="keywordtype">id</span>))-<span class="keywordtype">id</span>))&gt;FLT_EPSILON )
00268     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00269         <span class="keywordflow">return</span>;
00270     }
00271     <span class="keywordtype">id</span> = 11;
00272     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a3">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a17">TD_Float</a>)<span class="keywordtype">id</span>);
00273     <span class="keywordflow">if</span> ( fabs((<span class="keywordtype">float</span>)(pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a5">getFloatValue</a>(<span class="keywordtype">id</span>)-<span class="keywordtype">id</span>))&gt;FLT_EPSILON )
00274     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00275         <span class="keywordflow">return</span>;
00276     }
00277     <span class="keywordflow">if</span> ( fabs((<span class="keywordtype">float</span>)((*pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a7">getPointerFloatValue</a>(<span class="keywordtype">id</span>))-<span class="keywordtype">id</span>))&gt;FLT_EPSILON )
00278     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00279         <span class="keywordflow">return</span>;
00280     }
00281     <span class="keywordtype">id</span> = 1;
00282     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a3">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a18">TD_Integer</a>)<span class="keywordtype">id</span>);
00283     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a6">getIntegerValue</a>(<span class="keywordtype">id</span>)!=<span class="keywordtype">id</span> )
00284     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00285         <span class="keywordflow">return</span>;
00286     }
00287     <span class="keywordflow">if</span> ( (*pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a8">getPointerIntegerValue</a>(<span class="keywordtype">id</span>))!=<span class="keywordtype">id</span> )
00288     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00289         <span class="keywordflow">return</span>;
00290     }
00291     <span class="keywordtype">id</span> = 4;
00292     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a3">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a18">TD_Integer</a>)<span class="keywordtype">id</span>);
00293     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a6">getIntegerValue</a>(<span class="keywordtype">id</span>)!=<span class="keywordtype">id</span> )
00294     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00295         <span class="keywordflow">return</span>;
00296     }
00297     <span class="keywordflow">if</span> ( (*pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a8">getPointerIntegerValue</a>(<span class="keywordtype">id</span>))!=<span class="keywordtype">id</span> )
00298     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00299         <span class="keywordflow">return</span>;
00300     }
00301     <span class="keywordtype">id</span> = 7;
00302     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a3">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a18">TD_Integer</a>)<span class="keywordtype">id</span>);
00303     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a6">getIntegerValue</a>(<span class="keywordtype">id</span>)!=<span class="keywordtype">id</span> )
00304     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00305         <span class="keywordflow">return</span>;
00306     }
00307     <span class="keywordflow">if</span> ( (*pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a8">getPointerIntegerValue</a>(<span class="keywordtype">id</span>))!=<span class="keywordtype">id</span> )
00308     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00309         <span class="keywordflow">return</span>;
00310     }
00311     <span class="keywordtype">id</span> = 10;
00312     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a3">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a18">TD_Integer</a>)<span class="keywordtype">id</span>);
00313     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a6">getIntegerValue</a>(<span class="keywordtype">id</span>)!=<span class="keywordtype">id</span> )
00314     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00315         <span class="keywordflow">return</span>;
00316     }
00317     <span class="keywordflow">if</span> ( (*pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a8">getPointerIntegerValue</a>(<span class="keywordtype">id</span>))!=<span class="keywordtype">id</span> )
00318     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Failure to read back data pool item with ID: id"</span>);
00319         <span class="keywordflow">return</span>;
00320     }
00321     <span class="comment">// Check the time stamp of a data pool item</span>
00322     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a10">getTimeStamp</a>(1)!=time )
00323     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong time stamp"</span>);
00324         <span class="keywordflow">return</span>;
00325     }
00326 
00327     <span class="comment">// Check the setting/getting of the validity status</span>
00328     <span class="keywordtype">id</span> = 1;
00329     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a12">setValidityStatus</a>(<span class="keywordtype">id</span>,<span class="keyword">false</span>);
00330     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a11">isValid</a>(<span class="keywordtype">id</span>) )
00331     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Wrong validity status"</span>);
00332            <span class="keywordflow">return</span>;
00333     }
00334 
00335     <span class="comment">// Check illegal attempt to set the validity status</span>
00336     <span class="keywordflow">if</span> (<a class="code" href="classTestCase.html#b1">isNonNominalCheckAllowed</a>()) {
00337         pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a12">setValidityStatus</a>(11+1,<span class="keyword">false</span>);
00338         <span class="keywordflow">if</span> ( !verifyLatestEvent(nEvt+1,EVT_ILLEGAL_DP_ACCESS) )
00339             <span class="keywordflow">return</span>;
00340         nEvt = nEvt+1;
00341     }
00342 
00343     <span class="comment">// Reset the data pool and check that all items are valid</span>
00344     <span class="keywordtype">id</span> = 1;
00345     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a12">setValidityStatus</a>(<span class="keywordtype">id</span>,<span class="keyword">false</span>);
00346     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a22">reset</a>();
00347     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a11">isValid</a>(<span class="keywordtype">id</span>) )
00348     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Reset failure"</span>);
00349            <span class="keywordflow">return</span>;
00350     }
00351 
00352 
00353     <span class="comment">// Check the back-up value mechanism  (for an integer-valued data pool item)</span>
00354     <span class="keywordtype">id</span> = 1;
00355     <a class="code" href="BasicTypes_8h.html#a18">TD_Integer</a> oldValue = pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a6">getIntegerValue</a>(<span class="keywordtype">id</span>);
00356     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a12">setValidityStatus</a>(<span class="keywordtype">id</span>,<span class="keyword">false</span>);
00357     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a3">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a18">TD_Integer</a>)(oldValue+1));
00358     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a6">getIntegerValue</a>(<span class="keywordtype">id</span>)!=oldValue )
00359     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Back-up value failure"</span>);
00360             <span class="keywordflow">return</span>;
00361     }
00362     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a9">getDataItem</a>(<span class="keywordtype">id</span>)-&gt;<a class="code" href="classDC__DataItem.html#a4">getIntegerValue</a>()!=oldValue )
00363     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Back-up value failure"</span>);
00364         <span class="keywordflow">return</span>;
00365     }
00366     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a12">setValidityStatus</a>(<span class="keywordtype">id</span>,<span class="keyword">true</span>);
00367     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a3">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a18">TD_Integer</a>)(oldValue+1));
00368     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a6">getIntegerValue</a>(<span class="keywordtype">id</span>)!=(oldValue+1) )
00369     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Back-up value failure"</span>);
00370            <span class="keywordflow">return</span>;
00371     }
00372     <span class="keywordflow">if</span> ( pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a9">getDataItem</a>(<span class="keywordtype">id</span>)-&gt;<a class="code" href="classDC__DataItem.html#a4">getIntegerValue</a>()!=(oldValue+1) )
00373     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Back-up value failure"</span>);
00374            <span class="keywordflow">return</span>;
00375     }
00376 
00377     <span class="comment">// Check the back-up value mechanism  (for a real-valued data pool item)</span>
00378     <span class="keywordtype">id</span> = 2;
00379     <a class="code" href="BasicTypes_8h.html#a17">TD_Float</a> fOldValue = pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a5">getFloatValue</a>(<span class="keywordtype">id</span>);
00380     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a12">setValidityStatus</a>(<span class="keywordtype">id</span>,<span class="keyword">false</span>);
00381     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a3">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a17">TD_Float</a>)(fOldValue+1.0));
00382     <span class="keywordflow">if</span> ( fabs( (<span class="keywordtype">float</span>)(pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a5">getFloatValue</a>(<span class="keywordtype">id</span>)-fOldValue) )&gt;FLT_EPSILON )
00383     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Back-up value failure"</span>);
00384            <span class="keywordflow">return</span>;
00385     }
00386     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a12">setValidityStatus</a>(<span class="keywordtype">id</span>,<span class="keyword">true</span>);
00387     pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a3">setValue</a>(<span class="keywordtype">id</span>,(<a class="code" href="BasicTypes_8h.html#a17">TD_Float</a>)(fOldValue+1.0));
00388     <span class="keywordflow">if</span> ( fabs( (<span class="keywordtype">float</span>)(pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a5">getFloatValue</a>(<span class="keywordtype">id</span>)-(fOldValue+1.0)) )&gt;FLT_EPSILON )
00389     {      setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Back-up value failure"</span>);
00390            <span class="keywordflow">return</span>;
00391     }
00392 
00393     <span class="comment">// Check the iteration service</span>
00394     <a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a> counter = 0;
00395     <span class="keywordflow">for</span> (<a class="code" href="BasicTypes_8h.html#a16">TD_DataPoolId</a> i=pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a17">firstIdentifier</a>(); !pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a19">isLastIdentifier</a>(); i=pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a18">nextIdentifier</a>()) {
00396         counter++;
00397         pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a12">setValidityStatus</a>(i,<span class="keyword">false</span>);        <span class="comment">// dummy call -- just to exercise data pool access</span>
00398     }
00399     <span class="keywordflow">if</span> ( counter!=numberOfPar )
00400     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Error in data pool iteration"</span>);
00401         <span class="keywordflow">return</span>;
00402     }
00403 
00404     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a20">isFloat</a>(firstRealId) || pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a21">isInteger</a>(firstRealId) )
00405     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Error in type checking service"</span>);
00406         <span class="keywordflow">return</span>;
00407     }
00408     <span class="keywordflow">if</span> ( !pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a21">isInteger</a>(firstIntegerId) || pDP-&gt;<a class="code" href="classDC__SampleFullDataPool.html#a20">isFloat</a>(firstIntegerId) )
00409     {   setTestResult(<a class="code" href="TestConstants_8h.html#a1">TEST_FAILURE</a>, <span class="stringliteral">"Error in type checking service"</span>);
00410         <span class="keywordflow">return</span>;
00411     }
00412 
00413    setTestResult(<a class="code" href="TestConstants_8h.html#a0">TEST_SUCCESS</a>,<span class="stringliteral">"Test Successful"</span>);
00414    <span class="keywordflow">return</span>;
00415 }
</div></pre><center>
<b>Copyright 2003 <a href="http://www.pnp-software.com/" target="_parent">P&P Software GmbH</a> - All Rights Reserved</b>
</center>
