<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OBS Framework: PUSDumpMemory class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>PUSDumpMemory Class Reference</h1><code>#include &lt;<a class="el" href="PUSDumpMemory_8h-source.html">PUSDumpMemory.h</a>&gt;</code>
<p>
<p>Inheritance diagram for PUSDumpMemory:
<p><center><img src="classPUSDumpMemory.png" usemap="#PUSDumpMemory_map" border="0" alt=""></center>
<map name="PUSDumpMemory_map">
<area href="classPUSTelecommand.html" alt="PUSTelecommand" shape="rect" coords="99,168,287,192">
<area href="classTelecommand.html" alt="Telecommand" shape="rect" coords="99,112,287,136">
<area href="classPunctualAction.html" alt="PunctualAction" shape="rect" coords="99,56,287,80">
<area href="classCC__RootObject.html" alt="CC_RootObject" shape="rect" coords="99,0,287,24">
<area href="classDC__PUSDumpMemoryAbsolute.html" alt="DC_PUSDumpMemoryAbsolute" shape="rect" coords="0,280,188,304">
<area href="classDC__PUSDumpMemoryOffset.html" alt="DC_PUSDumpMemoryOffset" shape="rect" coords="198,280,386,304">
</map>
<a href="classPUSDumpMemory-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Base class for PUS telecommands to set up a memory dump either with base plus offset or absolute address. 
<p>
This class encapsulates the commonalities for the following subtypes of PUS service number 6:<ul>
<li>
Subtype 3: dump memory using base plus offset </li>
<li>
Subtype 5: dump memory using absolute addresses </li>
</ul>
This class defines an internal buffer to store the application data that define the telemetry packet. The maximum size of this buffer is a configuration parameter that must be set at application initialization time (method <code>setNumberOfRawData</code>). This and other internal data structured are declared <code>protected</code> in order to facilitate the implementation of concrete subclasses. <p>
During normal operation, configuration is performed using the <em>raw data load service</em>. Since in most cases the amount of data to be loaded can be large, the more efficient (but less safe) implementation of this service is used. <p>
This telecommand implements a <em>validity check</em> that returns "telecommand not valid" in case an attempt is made to load more application data than fit into the telecommand component. <p>
No implementation for the execution action of this telecommand is provided. This depends on whether the memory dump is of the "absolute address" or the "base address plus offset" type and must therefore be provided by the concrete subclasses. <p>
The PUS leaves some leeway in the definition of the structure of the application data for memory dump telecommands. This implementation makes the same assumptions as defined in the class comment of class <code>PUS_MemoryDump</code>. <dl compact><dt><b>Author:</b></dt><dd>Alessandro Pasetti (P&amp;P Software GmbH) </dd></dl>
<dl compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>

<p>

<p>
Definition at line <a class="el" href="PUSDumpMemory_8h-source.html#l00049">49</a> of file <a class="el" href="PUSDumpMemory_8h-source.html">PUSDumpMemory.h</a>.<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPUSDumpMemory.html#a0">PUSDumpMemory</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Instantiate a memory dump PUS telecommand.  <a href="#a0"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPUSDumpMemory.html#a1">setNumberOfRawData</a> (unsigned int max)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the maximum size of the application data array.  <a href="#a1"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>virtual unsigned int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPUSDumpMemory.html#a2">getNumberOfRawData</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the maximum size of the application data array.  <a href="#a2"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>virtual void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPUSDumpMemory.html#a3">setRawData</a> (unsigned char *d, unsigned int n)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of the raw data load service.  <a href="#a3"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>virtual unsigned int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPUSDumpMemory.html#a4">getNumberOfApplicationData</a> (void) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the number of application data bytes that were loaded with the last call to method <code>setRawData</code>.  <a href="#a4"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPUSDumpMemory.html#a5">setTelemetryManager</a> (<a class="el" href="classCC__TelemetryManager.html">CC_TelemetryManager</a> *<a class="el" href="classPUSDumpMemory.html#p3">pTmManager</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load the telemetry manager.  <a href="#a5"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classCC__TelemetryManager.html">CC_TelemetryManager</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPUSDumpMemory.html#a6">getTelemetryManager</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Getter method for the telemetry manager.  <a href="#a6"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>virtual bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPUSDumpMemory.html#a7">isObjectConfigured</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Perform a class-specific configuration check on the telecommand: check that the maximum number of raw data has been set and that the telemetry manager has been loaded.  <a href="#a7"></a><br><br></td></tr>
<tr><td colspan=2><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="p0" doxytag="PUSDumpMemory::data" ></a>
unsigned char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPUSDumpMemory.html#p0">data</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The buffer where the application data are stored. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="p1" doxytag="PUSDumpMemory::maxNumberData" ></a>
unsigned int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPUSDumpMemory.html#p1">maxNumberData</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The size in number of bytes of the <code>data</code> buffer. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="p2" doxytag="PUSDumpMemory::numberData" ></a>
unsigned int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPUSDumpMemory.html#p2">numberData</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The size in the number of bytes of the currently loaded application data. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="p3" doxytag="PUSDumpMemory::pTmManager" ></a>
<a class="el" href="classCC__TelemetryManager.html">CC_TelemetryManager</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPUSDumpMemory.html#p3">pTmManager</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The telemetry manager. <br><br></td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="PUSDumpMemory::PUSDumpMemory" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PUSDumpMemory::PUSDumpMemory           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Instantiate a memory dump PUS telecommand. 
<p>
The values of the internal data structure that is used to hold the telecommand application data is initialized to illegal values to signify that the telecommand is not yet configured. The telecommand type is set to PUS_TYPE_MEM. 
<p>
Definition at line <a class="el" href="PUSDumpMemory_8cpp-source.html#l00021">21</a> of file <a class="el" href="PUSDumpMemory_8cpp-source.html">PUSDumpMemory.cpp</a>.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a4" doxytag="PUSDumpMemory::getNumberOfApplicationData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> unsigned int PUSDumpMemory::getNumberOfApplicationData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return the number of application data bytes that were loaded with the last call to method <code>setRawData</code>. 
<p>
The number returned by this method is the same as the value of the argument n in the call to method <code>setRawData</code>. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classPUSDumpMemory.html#a3">setRawData</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>the number of application data bytes in the currently loaded packet </dd></dl>

<p>
Definition at line <a class="el" href="PUSDumpMemory_8cpp-source.html#l00060">60</a> of file <a class="el" href="PUSDumpMemory_8cpp-source.html">PUSDumpMemory.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="PUSDumpMemory::getNumberOfRawData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> unsigned int PUSDumpMemory::getNumberOfRawData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the maximum size of the application data array. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classPUSDumpMemory.html#a1">setNumberOfRawData</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>the maximum size of the application data in number of bytes </dd></dl>

<p>
Definition at line <a class="el" href="PUSDumpMemory_8cpp-source.html#l00040">40</a> of file <a class="el" href="PUSDumpMemory_8cpp-source.html">PUSDumpMemory.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="PUSDumpMemory::getTelemetryManager" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classCC__TelemetryManager.html">CC_TelemetryManager</a> * PUSDumpMemory::getTelemetryManager           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Getter method for the telemetry manager. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classPUSDumpMemory.html#a5">setTelemetryManager</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>the telemetry manager </dd></dl>

<p>
Definition at line <a class="el" href="PUSDumpMemory_8cpp-source.html#l00069">69</a> of file <a class="el" href="PUSDumpMemory_8cpp-source.html">PUSDumpMemory.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="PUSDumpMemory::isObjectConfigured" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool PUSDumpMemory::isObjectConfigured           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Perform a class-specific configuration check on the telecommand: check that the maximum number of raw data has been set and that the telemetry manager has been loaded. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>true if the telecommand is configured, false otherwise </dd></dl>

<p>
Reimplemented from <a class="el" href="classPUSTelecommand.html#a17">PUSTelecommand</a>.
<p>
Definition at line <a class="el" href="PUSDumpMemory_8cpp-source.html#l00073">73</a> of file <a class="el" href="PUSDumpMemory_8cpp-source.html">PUSDumpMemory.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="PUSDumpMemory::setNumberOfRawData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void PUSDumpMemory::setNumberOfRawData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>max</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the maximum size of the application data array. 
<p>
The maximum size is specified as the maximum number of bytes of the application data. This is an initialization method that should only be called once. A call to this method causes the internal data structures of the telecommand to be allocated and initialized. Only positive values of the method argument are legal. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>max</em>&nbsp;</td><td>the maximum size of the application data in number of bytes </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="PUSDumpMemory_8cpp-source.html#l00030">30</a> of file <a class="el" href="PUSDumpMemory_8cpp-source.html">PUSDumpMemory.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="PUSDumpMemory::setRawData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void PUSDumpMemory::setRawData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>d</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>n</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implementation of the raw data load service. 
<p>
This method copies the argument array into an internal array. The number of bytes n in the argument array must be less than the maximum value set with method <code>setNumberOfRawData</code>. If an attempt is made to load a greater number of raw data, then the telecommand is declared to be invalid with validity check code equal to VC_TOO_MANY_RAW_DATA. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>d</em>&nbsp;</td><td>the array holding the raw data </td></tr>
    <tr><td></td><td valign=top><em>n</em>&nbsp;</td><td>the number of items in array d </td></tr>
  </table>
</dl>

<p>
Reimplemented from <a class="el" href="classTelecommand.html#a17">Telecommand</a>.
<p>
Definition at line <a class="el" href="PUSDumpMemory_8cpp-source.html#l00044">44</a> of file <a class="el" href="PUSDumpMemory_8cpp-source.html">PUSDumpMemory.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="PUSDumpMemory::setTelemetryManager" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void PUSDumpMemory::setTelemetryManager           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classCC__TelemetryManager.html">CC_TelemetryManager</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pTmManager</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Load the telemetry manager. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classPunctualAction.html#b0">doAction</a> </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>pTmManager</em>&nbsp;</td><td>the PUS telemetry mode manager </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="PUSDumpMemory_8cpp-source.html#l00064">64</a> of file <a class="el" href="PUSDumpMemory_8cpp-source.html">PUSDumpMemory.cpp</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="PUSDumpMemory_8h-source.html">PUSDumpMemory.h</a><li><a class="el" href="PUSDumpMemory_8cpp-source.html">PUSDumpMemory.cpp</a></ul>
<center>
<b>Copyright 2003 <a href="http://www.pnp-software.com/" target="_parent">P&P Software GmbH</a> - All Rights Reserved</b>
</center>
